(()=>{var e={};e.id=974,e.ids=[974],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4672:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(1871),s(9262),s(5866);var i=s(3191),a=s(8716),l=s(7922),n=s.n(l),o=s(5231),r={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(r[e]=()=>o[e]);s.d(t,r);let c=["",{children:["play",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1871)),"/home/project/app/play/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9262)),"/home/project/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/project/app/play/page.tsx"],h="/play/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/play/page",pathname:"/play",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6604:(e,t,s)=>{Promise.resolve().then(s.bind(s,5069))},5069:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var i=s(326),a=s(7577),l=s(5047),n=s(6226);s(203);var o=s(1538),r=s(3734),c=s(3634);function d({timeLeft:e,score:t,combo:s,dashCooldown:a,maxDashCooldown:l=2e3}){let n=Math.min(100,s/10*100);return i.jsx("div",{className:"fixed top-0 left-0 right-0 p-4 safe-top z-10",children:i.jsx("div",{className:"max-w-md mx-auto",children:(0,i.jsxs)("div",{className:"glass rounded-2xl p-4 card-elevated",children:[(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(o.Z,{className:"w-4 h-4 text-white"})}),(0,i.jsxs)("div",{className:"text-2xl font-black text-white",children:[e,"s"]})]}),(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(r.Z,{className:"w-4 h-4 text-yellow-300 fill-yellow-300"})}),i.jsx("div",{className:"text-2xl font-black text-white",children:t})]}),(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(c.Z,{className:"w-4 h-4 text-yellow-300"})}),(0,i.jsxs)("div",{className:"text-2xl font-black text-white",children:["x",s]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-xs text-white/70",children:"Combo Meter"}),(0,i.jsxs)("span",{className:"text-xs text-white/70",children:[s,"/10"]})]}),i.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-red-500 transition-all duration-300",style:{width:`${n}%`}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-xs text-white/70",children:"Dash Ready"}),i.jsx("span",{className:"text-xs text-white/70",children:a>0?`${(a/1e3).toFixed(1)}s`:"Ready!"})]}),i.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-purple-400 to-pink-500 transition-all duration-100",style:{width:`${Math.max(0,100-a/l*100)}%`}})})]})]})]})})})}function h({onGameEnd:e,playerColor:t,triggerHaptic:s}){let n=(0,a.useRef)(null),[o,r]=(0,a.useState)(60),[c,h]=(0,a.useState)(0),[x,u]=(0,a.useState)(1),[m,p]=(0,a.useState)(0);(0,l.useRouter)();let f=(0,a.useRef)({playerX:0,playerY:0,targetX:0,targetY:0,objects:[],score:0,combo:1,comboStreak:0,maxCombo:1,goodBites:0,goldenBites:0,hazardsHit:0,dashesUsed:0,lastDash:0,isDashing:!1,dashCooldown:3e3,stunned:!1,stunnedUntil:0,gameTime:0,lastSpawn:0,isMouseDown:!1,isMunching:!1,munchEndTime:0});return(0,a.useCallback)(()=>{let e=Date.now(),t=f.current;if(e-t.lastDash<t.dashCooldown||t.stunned)return;let i=t.targetX-t.playerX,a=t.targetY-t.playerY,l=Math.sqrt(i*i+a*a);l>10&&(t.playerX+=i/l*80,t.playerY+=a/l*80,t.playerX=Math.max(30,Math.min(t.playerX,345)),t.playerY=Math.max(30,Math.min(t.playerY,637)),t.isDashing=!0,t.dashesUsed++,t.lastDash=e,s("medium"),setTimeout(()=>{f.current.isDashing=!1},150))},[s]),(0,i.jsxs)("div",{className:"relative w-full h-full",children:[i.jsx(d,{timeLeft:o,score:c,combo:x,dashCooldown:m}),i.jsx("canvas",{ref:n,className:"w-full h-full touch-none",style:{touchAction:"none"}}),i.jsx("div",{className:"fixed bottom-24 left-0 right-0 text-center z-10 pointer-events-none",children:i.jsx("div",{className:"glass px-6 py-3 rounded-full inline-block card-elevated",children:i.jsx("p",{className:"text-white font-medium",children:"Hold to move • Tap to dash"})})})]})}s(849);var x=s(5629),u=s(8907),m=s(1572),p=s(4893),f=s(5920);function y(){let e=(0,l.useRouter)(),{state:t,cosmetics:s,updateScore:o,updateChallengeProgress:r,completeChallenge:d,challenges:y,triggerHaptic:j,isLoaded:b}=(0,x.g)(),[g,v]=(0,a.useState)("menu"),[w,N]=(0,a.useState)(null),[C,T]=(0,a.useState)({crumbs:0,challengeRewards:0}),k=x.w.find(e=>e.id===t.selectedSkin),A=k?.color||"#3b82f6";return b?"results"===g&&w?i.jsx("div",{className:"min-h-screen p-4 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"max-w-md w-full glass rounded-3xl p-8 card-elevated",children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[i.jsx(u.Z,{className:"w-16 h-16 text-yellow-500 mx-auto mb-3"}),i.jsx("h2",{className:"text-5xl font-black text-white mb-2 animate-pop",children:w.score}),i.jsx("p",{className:"text-white/80 text-lg",children:"Final Score"}),w.score>t.bestScore&&i.jsx("p",{className:"text-base font-bold text-yellow-300 mt-2",children:"\uD83C\uDF89 NEW BEST SCORE!"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white/20 rounded-2xl p-4 text-center",children:[i.jsx(m.Z,{className:"w-6 h-6 text-yellow-300 mx-auto mb-2"}),(0,i.jsxs)("div",{className:"text-2xl font-black text-white",children:["+",C.crumbs+C.challengeRewards]}),i.jsx("div",{className:"text-sm text-white/70",children:"Crumbs"})]}),(0,i.jsxs)("div",{className:"bg-white/20 rounded-2xl p-4 text-center",children:[i.jsx(c.Z,{className:"w-6 h-6 text-yellow-300 mx-auto mb-2"}),(0,i.jsxs)("div",{className:"text-2xl font-black text-white",children:["x",w.maxCombo]}),i.jsx("div",{className:"text-sm text-white/70",children:"Max Combo"})]})]}),(0,i.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/80",children:"Good Bites"}),i.jsx("span",{className:"font-bold text-white text-lg",children:w.goodBites})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/80",children:"Golden Bites"}),i.jsx("span",{className:"font-bold text-white text-lg",children:w.goldenBites})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/80",children:"Hazards Hit"}),i.jsx("span",{className:"font-bold text-white text-lg",children:w.hazardsHit})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/80",children:"Dashes Used"}),i.jsx("span",{className:"font-bold text-white text-lg",children:w.dashesUsed})]})]}),C.challengeRewards>0&&i.jsx("div",{className:"bg-white/20 border-2 border-yellow-300 rounded-2xl p-4 mb-6",children:(0,i.jsxs)("p",{className:"text-base font-bold text-yellow-300 text-center",children:["\uD83C\uDFC6 Challenge bonus: +",C.challengeRewards," Crumbs!"]})}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("button",{onClick:()=>{v("playing"),N(null)},className:"w-full bg-white text-red-600 font-black text-xl py-5 rounded-2xl hover:bg-white/95 active:scale-95 transition-all flex items-center justify-center gap-2 card-elevated",children:[i.jsx(p.Z,{className:"w-6 h-6"}),"Play Again"]}),(0,i.jsxs)("button",{onClick:()=>e.push("/"),className:"w-full bg-white/20 text-white font-bold text-base py-4 rounded-2xl hover:bg-white/25 active:scale-95 transition-all flex items-center justify-center gap-2",children:[i.jsx(f.Z,{className:"w-5 h-5"}),"Home"]})]})]})}):"playing"===g?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx(h,{onGameEnd:e=>{console.log("[Analytics] run_started",{score:e.score});let{crumbsEarned:s}=o(e.score),i=0;y.forEach(e=>{if(e.completed&&!t.completedChallenges.includes(e.id)){let t=d(e.id);i+=t}}),y.forEach(t=>{switch(t.id.split("_")[0]){case"score":e.score>=t.target&&r(t.id,e.score);break;case"collect":r(t.id,e.goodBites);break;case"combo":r(t.id,e.maxCombo);break;case"golden":r(t.id,e.goldenBites);break;case"perfect":0===e.hazardsHit&&r(t.id,1);break;case"dash":r(t.id,e.dashesUsed);break;case"play":r(t.id,1);break;case"survive":r(t.id,Math.floor(e.survivalTime))}}),N(e),T({crumbs:s,challengeRewards:i}),v("results")},playerColor:A,triggerHaptic:j})}):i.jsx("div",{className:"min-h-screen p-6 flex items-center justify-center safe-top",children:(0,i.jsxs)("div",{className:"max-w-md w-full glass rounded-3xl p-8 card-elevated text-center",children:[i.jsx("div",{className:"mb-4 flex justify-center",children:i.jsx("div",{className:"relative w-32 h-32",children:i.jsx(n.default,{src:"/santa_pockets.png",alt:"Santa Pockets the Raccoon",fill:!0,className:"object-contain drop-shadow-2xl",priority:!0})})}),i.jsx("h1",{className:"text-4xl font-black text-white mb-2",children:"Arcade Mode"}),i.jsx("p",{className:"text-white/80 text-lg mb-2",children:"60 Second Sprint"}),i.jsx("p",{className:"text-white/60 text-sm mb-8",children:"Help Pockets collect treats!"}),(0,i.jsxs)("div",{className:"bg-white/10 rounded-2xl p-6 mb-8",children:[i.jsx("h2",{className:"font-bold text-white text-lg mb-4",children:"How to Play:"}),(0,i.jsxs)("ul",{className:"text-left text-base text-white/90 space-y-3",children:[(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:"\uD83C\uDFAF"}),i.jsx("span",{children:"Hold screen to move Pockets"})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:"⚡"}),i.jsx("span",{children:"Tap to dash through obstacles"})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:"\uD83C\uDF70"}),i.jsx("span",{children:"Collect desserts for points"})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:"⭐"}),i.jsx("span",{children:"Grab golden stars for bonus points"})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:"\uD83C\uDFCF"}),i.jsx("span",{children:"Avoid non-food items like bats & socks"})]}),(0,i.jsxs)("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:"\uD83D\uDD25"}),i.jsx("span",{children:"Build combos for multipliers"})]})]})]}),i.jsx("button",{onClick:()=>{v("playing"),console.log("[Analytics] run_started")},className:"w-full bg-white text-red-600 font-black text-2xl py-6 rounded-2xl hover:bg-white/95 active:scale-95 transition-all mb-4 card-elevated",children:"START GAME"}),i.jsx("button",{onClick:()=>e.push("/"),className:"text-white/80 hover:text-white font-medium text-base",children:"Back to Home"})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-white/30 border-t-white"})})}},203:(e,t,s)=>{"use strict";s.d(t,{Kb:()=>a});let i=[{level:1,gridSize:{rows:8,cols:7},maxMoves:25,objectives:[{type:"score",target:1e3,description:"Score 1,000 points"}],starThresholds:[1e3,2e3,3500],difficulty:"easy"},{level:2,gridSize:{rows:8,cols:7},maxMoves:22,objectives:[{type:"score",target:1500,description:"Score 1,500 points"}],starThresholds:[1500,2500,4e3],difficulty:"easy"},{level:3,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:2e3,description:"Score 2,000 points"}],starThresholds:[2e3,3500,5500],difficulty:"easy"},{level:4,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:2500,description:"Score 2,500 points"}],starThresholds:[2500,4e3,6500],difficulty:"easy"},{level:5,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:3e3,description:"Score 3,000 points"}],starThresholds:[3e3,5e3,8e3],difficulty:"easy"},...Array.from({length:10},(e,t)=>{let s=t+6,i=4e3+500*s;return{level:s,gridSize:{rows:9,cols:7},maxMoves:20,objectives:[{type:"score",target:i,description:`Score ${i.toLocaleString()} points`}],starThresholds:[i,Math.floor(1.5*i),Math.floor(2.2*i)],difficulty:"medium"}}),...Array.from({length:15},(e,t)=>{let s=t+16,i=1e4+700*s;return{level:s,gridSize:{rows:9,cols:7},maxMoves:Math.max(12,18-Math.floor(t/5)),objectives:[{type:"score",target:i,description:`Score ${i.toLocaleString()} points`}],starThresholds:[i,Math.floor(1.4*i),Math.floor(2*i)],difficulty:"hard"}})];function a(e){return i.find(t=>t.level===e)||i[0]}},849:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});let i=new class{constructor(){this.audioContext=null,this.enabled=!0,this.volume=.3,this.initialized=!1}async initialize(){if(!this.initialized&&this.audioContext){if("suspended"===this.audioContext.state)try{await this.audioContext.resume(),this.initialized=!0,console.log("Audio initialized")}catch(e){console.warn("Failed to initialize audio:",e)}else this.initialized=!0}}setEnabled(e){this.enabled=e,e&&!this.initialized&&this.initialize()}getEnabled(){return this.enabled}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}async playTone(e,t,s="sine",i){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let a=this.audioContext.createOscillator(),l=this.audioContext.createGain();a.connect(l),l.connect(this.audioContext.destination),a.frequency.value=e,a.type=s;let n=(i??this.volume)*.5;l.gain.setValueAtTime(n,this.audioContext.currentTime),l.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),a.start(this.audioContext.currentTime),a.stop(this.audioContext.currentTime+t)}async playMatch(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),s=this.audioContext.createGain();t.connect(s),s.connect(this.audioContext.destination),t.type="sine",t.frequency.setValueAtTime(400,e),t.frequency.exponentialRampToValueAtTime(600,e+.1),s.gain.setValueAtTime(.3*this.volume,e),s.gain.exponentialRampToValueAtTime(.01,e+.15),t.start(e),t.stop(e+.15)}async playChomp(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;for(let t=0;t<3;t++){let s=this.audioContext.createOscillator(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter();s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.type="square",a.type="lowpass",a.frequency.value=800;let l=e+.08*t;s.frequency.setValueAtTime(200-30*t,l),s.frequency.exponentialRampToValueAtTime(100,l+.06),i.gain.setValueAtTime(.4*this.volume,l),i.gain.exponentialRampToValueAtTime(.01,l+.06),s.start(l),s.stop(l+.06)}}async playWhoops(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),s=this.audioContext.createGain();t.connect(s),s.connect(this.audioContext.destination),t.type="sawtooth",t.frequency.setValueAtTime(300,e),t.frequency.exponentialRampToValueAtTime(150,e+.2),s.gain.setValueAtTime(.3*this.volume,e),s.gain.exponentialRampToValueAtTime(.01,e+.2),t.start(e),t.stop(e+.2)}async playCombo(e){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let t=400+100*e,s=this.audioContext.currentTime;for(let i=0;i<e;i++){let e=this.audioContext.createOscillator(),a=this.audioContext.createGain();e.connect(a),a.connect(this.audioContext.destination),e.type="sine";let l=s+.05*i;e.frequency.setValueAtTime(t+50*i,l),a.gain.setValueAtTime(.25*this.volume,l),a.gain.exponentialRampToValueAtTime(.01,l+.1),e.start(l),e.stop(l+.1)}}async playSuccess(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;[523.25,659.25,783.99,1046.5].forEach((t,s)=>{let i=this.audioContext.createOscillator(),a=this.audioContext.createGain();i.connect(a),a.connect(this.audioContext.destination),i.type="sine";let l=e+.1*s;i.frequency.value=t,a.gain.setValueAtTime(.3*this.volume,l),a.gain.exponentialRampToValueAtTime(.01,l+.2),i.start(l),i.stop(l+.2)})}playClick(){this.playTone(600,.05,"sine",.2*this.volume)}async playMunch(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),s=this.audioContext.createGain(),i=this.audioContext.createBiquadFilter();t.connect(i),i.connect(s),s.connect(this.audioContext.destination),t.type="square",i.type="lowpass",i.frequency.value=1200,t.frequency.setValueAtTime(350,e),t.frequency.exponentialRampToValueAtTime(250,e+.08),s.gain.setValueAtTime(.35*this.volume,e),s.gain.exponentialRampToValueAtTime(.01,e+.08),t.start(e),t.stop(e+.08)}async playYuck(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;for(let t=0;t<2;t++){let s=this.audioContext.createOscillator(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter();s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.type="sawtooth",a.type="lowpass",a.frequency.value=600;let l=e+.12*t;s.frequency.setValueAtTime(180-20*t,l),s.frequency.exponentialRampToValueAtTime(120,l+.1),i.gain.setValueAtTime(.4*this.volume,l),i.gain.exponentialRampToValueAtTime(.01,l+.1),s.start(l),s.stop(l+.1)}}}},1572:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(6557).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},3734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(6557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},1538:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(6557).Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},3634:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(6557).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},1871:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});let i=(0,s(8570).createProxy)(String.raw`/home/project/app/play/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[728,226,806],()=>s(4672));module.exports=i})();