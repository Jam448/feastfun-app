(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{2510:function(e,t,a){Promise.resolve().then(a.bind(a,5578))},5578:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(7437),s=a(2265),i=a(3145),n=a(4681);let l=(0,a(9763).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var o=a(2023),d=a(401),c=a(6337);function p(){let{state:e,purchaseCosmetic:t,selectCosmetic:a,triggerHaptic:p,isLoaded:m}=(0,n.g)(),[u,g]=(0,s.useState)("skin");if(!m)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-white/30 border-t-white"})});let h=n.w.filter(e=>e.type===u),y=e=>{t(e)?p("heavy"):p("light")},x=(e,t)=>{a(e,t),p("medium")},f=t=>e.ownedCosmetics.includes(t),w=(t,a)=>"skin"===a?e.selectedSkin===t:"trail"===a?e.selectedTrail===t:"emote"===a&&e.selectedEmote===t;return(0,r.jsx)("div",{className:"min-h-screen p-4 safe-top",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,r.jsxs)("div",{className:"glass rounded-3xl p-6 shadow-2xl",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"relative w-20 h-20",children:(0,r.jsx)(i.default,{src:"/santa_pockets.png",alt:"Santa Pockets",fill:!0,className:"object-contain drop-shadow-lg"})})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("h1",{className:"text-3xl font-black text-white flex items-center gap-2",children:[(0,r.jsx)(l,{className:"w-8 h-8 text-yellow-300"}),"Locker"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 bg-orange-100 px-4 py-2 rounded-full",children:[(0,r.jsx)(o.Z,{className:"w-5 h-5 text-orange-600"}),(0,r.jsx)("span",{className:"text-lg font-black text-orange-700",children:e.crumbs})]})]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Unlock and equip cosmetics"})]}),(0,r.jsx)("div",{className:"glass rounded-2xl p-2 shadow-xl",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>g("skin"),className:"flex-1 py-3 rounded-xl font-bold transition ".concat("skin"===u?"bg-gradient-to-r from-primary-500 to-red-500 text-white":"bg-transparent text-gray-600 hover:bg-gray-100"),children:"Skins"}),(0,r.jsx)("button",{onClick:()=>g("trail"),className:"flex-1 py-3 rounded-xl font-bold transition ".concat("trail"===u?"bg-gradient-to-r from-primary-500 to-red-500 text-white":"bg-transparent text-gray-600 hover:bg-gray-100"),children:"Trails"}),(0,r.jsx)("button",{onClick:()=>g("emote"),className:"flex-1 py-3 rounded-xl font-bold transition ".concat("emote"===u?"bg-gradient-to-r from-primary-500 to-red-500 text-white":"bg-transparent text-gray-600 hover:bg-gray-100"),children:"Emotes"})]})}),(0,r.jsx)("div",{className:"space-y-3",children:h.map(t=>{let a=f(t.id),s=w(t.id,t.type);return(0,r.jsx)("div",{className:"glass rounded-2xl p-4 shadow-lg ".concat(s?"ring-2 ring-primary-500":""),children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:["skin"===t.type&&t.color&&(0,r.jsx)("div",{className:"w-16 h-16 rounded-full flex-shrink-0 border-4 border-white shadow-lg",style:{backgroundColor:t.color}}),"emote"===t.type&&(0,r.jsx)("div",{className:"w-16 h-16 rounded-full flex-shrink-0 border-4 border-white shadow-lg bg-gray-100 flex items-center justify-center text-3xl",children:t.description}),"trail"===t.type&&(0,r.jsx)("div",{className:"w-16 h-16 rounded-full flex-shrink-0 border-4 border-white shadow-lg bg-gradient-to-r from-purple-400 to-pink-400"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900 truncate",children:t.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 truncate",children:t.description})]}),(0,r.jsx)("div",{className:"flex-shrink-0",children:s?(0,r.jsxs)("div",{className:"bg-green-500 text-white px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-1",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),"Equipped"]}):a?(0,r.jsx)("button",{onClick:()=>x(t.id,t.type),className:"bg-blue-500 text-white px-4 py-2 rounded-xl font-bold text-sm hover:bg-blue-600 active:scale-95 transition",children:"Equip"}):0===t.cost?(0,r.jsx)("div",{className:"bg-gray-300 text-gray-600 px-4 py-2 rounded-xl font-bold text-sm",children:"Free"}):e.crumbs>=t.cost?(0,r.jsxs)("button",{onClick:()=>y(t.id),className:"bg-gradient-to-r from-primary-500 to-red-500 text-white px-4 py-2 rounded-xl font-bold text-sm hover:shadow-lg active:scale-95 transition flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),t.cost]}):(0,r.jsxs)("div",{className:"bg-gray-200 text-gray-500 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-1",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),t.cost]})})]})},t.id)})})]})})}},4681:function(e,t,a){"use strict";a.d(t,{g:function(){return o},w:function(){return n}});var r=a(2265);let s="feastfun_game_state",i={bestScore:0,crumbs:0,ownedCosmetics:["default_skin","default_trail"],selectedSkin:"default_skin",selectedTrail:"default_trail",selectedEmote:"",completedChallenges:[],dailyStreak:0,lastPlayedDate:"",soundEnabled:!0,hapticsEnabled:!0,totalRuns:0,totalScore:0},n=[{id:"default_skin",name:"Classic",type:"skin",cost:0,color:"#3b82f6",description:"The OG"},{id:"fire_skin",name:"Firecracker",type:"skin",cost:500,color:"#ef4444",description:"Blazing hot"},{id:"ice_skin",name:"Frosty",type:"skin",cost:500,color:"#06b6d4",description:"Cool as ice"},{id:"gold_skin",name:"Golden",type:"skin",cost:1e3,color:"#fbbf24",description:"For winners"},{id:"neon_skin",name:"Neon",type:"skin",cost:1500,color:"#a855f7",description:"Glow up"},{id:"default_trail",name:"Basic Trail",type:"trail",cost:0,description:"Standard trail"},{id:"star_trail",name:"Starlight",type:"trail",cost:300,description:"Leave stars behind"},{id:"rainbow_trail",name:"Rainbow",type:"trail",cost:800,description:"Colorful path"},{id:"wave_emote",name:"Wave",type:"emote",cost:200,description:"\uD83D\uDC4B"},{id:"fire_emote",name:"On Fire",type:"emote",cost:400,description:"\uD83D\uDD25"}],l=[{id:"score_1000",name:"Score 1000",description:"Score 1000+ points in a run",type:"daily",target:1e3,reward:100},{id:"score_2000",name:"Score 2000",description:"Score 2000+ points in a run",type:"daily",target:2e3,reward:200},{id:"collect_20",name:"Bite Collector",description:"Collect 20 Good Bites in one run",type:"daily",target:20,reward:150},{id:"combo_5",name:"Combo Master",description:"Reach a 5x combo multiplier",type:"daily",target:5,reward:100},{id:"golden_3",name:"Golden Hunter",description:"Collect 3 Golden Bites in one run",type:"daily",target:3,reward:200},{id:"perfect_run",name:"Perfect Run",description:"Complete a run without hitting hazards",type:"daily",target:1,reward:300},{id:"dash_10",name:"Dash Master",description:"Use dash 10 times in one run",type:"daily",target:10,reward:100},{id:"play_3",name:"Daily Grind",description:"Complete 3 runs today",type:"daily",target:3,reward:150},{id:"survive_45",name:"Survivor",description:"Survive for 45+ seconds",type:"daily",target:45,reward:100},{id:"speed_demon",name:"Speed Demon",description:"Collect 30 bites in 30 seconds",type:"daily",target:30,reward:250},{id:"week_score_10k",name:"Weekly Warrior",description:"Score 10,000+ total points this week",type:"weekly",target:1e4,reward:500},{id:"week_runs_15",name:"Dedication",description:"Complete 15 runs this week",type:"weekly",target:15,reward:400},{id:"week_streak_5",name:"Streak Master",description:"Maintain a 5-day streak",type:"weekly",target:5,reward:600},{id:"week_golden_15",name:"Golden Week",description:"Collect 15 Golden Bites this week",type:"weekly",target:15,reward:700},{id:"week_perfect_3",name:"Perfectionist",description:"Complete 3 perfect runs this week",type:"weekly",target:3,reward:800}];function o(){let[e,t]=(0,r.useState)(i),[a,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),p=()=>{let e=new Date().toISOString().split("T")[0],t=new Date().getDay(),a=new Date;a.setDate(a.getDate()+(0===t?-6:1-t));let r=a.toISOString().split("T")[0],s=l.filter(e=>"daily"===e.type),i=l.filter(e=>"weekly"===e.type),n=parseInt(e.replace(/-/g,""))%s.length;o([...[s[n%s.length],s[(n+1)%s.length],s[(n+2)%s.length]].map(t=>({...t,id:"".concat(t.id,"_").concat(e),type:"daily",progress:0,completed:!1})),...i.map(e=>({...e,id:"".concat(e.id,"_").concat(r),type:"weekly",progress:0,completed:!1}))])};return(0,r.useEffect)(()=>{(()=>{console.log("[GameStore] Initializing...");try{{let e=localStorage.getItem(s);e&&(t(JSON.parse(e)),console.log("[GameStore] State loaded from localStorage"))}}catch(e){console.error("Failed to load game state:",e)}p(),console.log("[GameStore] Loaded successfully"),c(!0)})()},[]),(0,r.useEffect)(()=>{if(d)try{localStorage.setItem(s,JSON.stringify(e))}catch(e){console.error("Failed to save game state:",e)}},[e,d]),{state:e,challenges:a,cosmetics:n,updateScore:a=>{let r=Math.floor(a/200),s=new Date().toISOString().split("T")[0],i=e.dailyStreak;if(e.lastPlayedDate!==s){let t=new Date;t.setDate(t.getDate()-1);let a=t.toISOString().split("T")[0];i=e.lastPlayedDate===a?e.dailyStreak+1:1}return console.log("[Analytics] run_ended",{score:a,crumbsEarned:r,streak:i}),t(e=>({...e,bestScore:Math.max(e.bestScore,a),crumbs:e.crumbs+r,dailyStreak:i,lastPlayedDate:s,totalRuns:e.totalRuns+1,totalScore:e.totalScore+a})),{crumbsEarned:r,newStreak:i}},purchaseCosmetic:a=>{let r=n.find(e=>e.id===a);return!(!r||e.crumbs<r.cost||e.ownedCosmetics.includes(a))&&(console.log("[Analytics] cosmetic_purchased",{cosmeticId:a,cost:r.cost}),t(e=>({...e,crumbs:e.crumbs-r.cost,ownedCosmetics:[...e.ownedCosmetics,a]})),!0)},selectCosmetic:(a,r)=>{e.ownedCosmetics.includes(a)&&("skin"===r?t(e=>({...e,selectedSkin:a})):"trail"===r?t(e=>({...e,selectedTrail:a})):"emote"===r&&t(e=>({...e,selectedEmote:a})))},completeChallenge:r=>{let s=a.find(e=>e.id===r);return!s||e.completedChallenges.includes(r)?0:(console.log("[Analytics] challenge_completed",{challengeId:r,reward:s.reward}),t(e=>({...e,crumbs:e.crumbs+s.reward,completedChallenges:[...e.completedChallenges,r]})),s.reward)},updateChallengeProgress:(t,a)=>{o(r=>r.map(r=>r.id!==t||e.completedChallenges.includes(t)?r:{...r,progress:Math.max(r.progress,a),completed:a>=r.target}))},toggleSound:()=>{t(e=>({...e,soundEnabled:!e.soundEnabled}))},toggleHaptics:()=>{t(e=>({...e,hapticsEnabled:!e.hapticsEnabled}))},resetData:()=>{console.log("[Analytics] data_reset"),t(i),o([]),p()},triggerHaptic:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";e.hapticsEnabled&&"vibrate"in navigator&&navigator.vibrate({light:10,medium:20,heavy:50}[t])},isLoaded:d}}},401:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6337:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2023:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])}},function(e){e.O(0,[847,971,117,744],function(){return e(e.s=2510)}),_N_E=e.O()}]);