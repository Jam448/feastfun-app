(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{9015:function(e,t,i){Promise.resolve().then(i.bind(i,2626))},2626:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return y}});var l=i(7437),s=i(2265);let o={candy_cane:"\uD83C\uDF6C",gingerbread:"\uD83C\uDF6A",cookie:"\uD83E\uDD60",cupcake:"\uD83E\uDDC1",pudding:"\uD83C\uDF6E",pie:"\uD83E\uDD67"};class a{generateRandomFood(){let e=["candy_cane","gingerbread","cookie","cupcake","pudding","pie"];return e[Math.floor(Math.random()*e.length)]}createCell(e,t,i){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return{id:"".concat(e,"-").concat(t,"-").concat(Date.now(),"-").concat(Math.random()),row:e,col:t,foodType:i||this.generateRandomFood(),specialType:l,isMatched:!1,isFalling:!1,isNew:!1,isBeingEaten:!1}}initializeGrid(){this.grid=Array(this.rows).fill(null).map(()=>Array(this.cols).fill(null));for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++){let i;let l=0;do i=this.generateRandomFood(),l++;while(l<10&&this.wouldCreateMatch(e,t,i));this.grid[e][t]=this.createCell(e,t,i)}}wouldCreateMatch(e,t,i){var l,s,o,a,r,n,d,c;let h=1;for(let o=t-1;o>=0&&(null===(s=this.grid[e])||void 0===s?void 0:null===(l=s[o])||void 0===l?void 0:l.foodType)===i;o--)h++;for(let l=t+1;l<this.cols&&(null===(a=this.grid[e])||void 0===a?void 0:null===(o=a[l])||void 0===o?void 0:o.foodType)===i;l++)h++;if(h>=3)return!0;let u=1;for(let l=e-1;l>=0&&(null===(n=this.grid[l])||void 0===n?void 0:null===(r=n[t])||void 0===r?void 0:r.foodType)===i;l--)u++;for(let l=e+1;l<this.rows&&(null===(c=this.grid[l])||void 0===c?void 0:null===(d=c[t])||void 0===d?void 0:d.foodType)===i;l++)u++;return u>=3}canSwap(e,t,i,l){var s,o;let a=null===(s=this.grid[e])||void 0===s?void 0:s[t],r=null===(o=this.grid[i])||void 0===o?void 0:o[l];if(!a||!r)return!1;let n=Math.abs(e-i),d=Math.abs(t-l);return 1===n&&0===d||0===n&&1===d}swap(e,t,i,l){if(!this.canSwap(e,t,i,l))return{isValid:!1,matches:[],score:0,cascade:!1,specialsCreated:[]};let s=this.grid[e][t];if(this.grid[e][t]=this.grid[i][l],this.grid[i][l]=s,this.grid[e][t]&&(this.grid[e][t].row=e,this.grid[e][t].col=t),this.grid[i][l]&&(this.grid[i][l].row=i,this.grid[i][l].col=l),0===this.findAllMatches().length){let s=this.grid[e][t];return this.grid[e][t]=this.grid[i][l],this.grid[i][l]=s,this.grid[e][t]&&(this.grid[e][t].row=e,this.grid[e][t].col=t),this.grid[i][l]&&(this.grid[i][l].row=i,this.grid[i][l].col=l),{isValid:!1,matches:[],score:0,cascade:!1,specialsCreated:[]}}return this.comboMultiplier=1,this.processAllMatches()}processAllMatches(){let e=0,t=[],i=0,l=!1,s=0,o=0,a=[];for(;i<20;){var r,n;let d=this.findAllMatches();if(0===d.length)break;i>0&&(l=!0,this.comboMultiplier+=.5);let c=new Set,h=[];for(let i of d){s=Math.max(s,i.length),o++,i.length>=5&&a.push("".concat(i.length,"-piece"));let l=0;l=3===i.length?60:4===i.length?120:5===i.length?200:6===i.length?400:800,"box"===i.type?l=Math.floor(1.5*l):"diagonal"===i.type?l=Math.floor(2*l):("L"===i.type||"T"===i.type||"plus"===i.type)&&(l=Math.floor(1.75*l)),e+=Math.floor(l*this.comboMultiplier);let r=this.determineSpecialCandy(i);if("none"!==r&&i.cells.length>0){t.push(r);let e=i.cells[Math.floor(i.cells.length/2)];h.push({row:e.row,col:e.col,foodType:e.foodType,special:r})}for(let e of i.cells)c.add("".concat(e.row,"-").concat(e.col))}for(let e of h)c.delete("".concat(e.row,"-").concat(e.col));for(let e of c){let[t,i]=e.split("-").map(Number);(null===(r=this.grid[t])||void 0===r?void 0:r[i])&&(this.grid[t][i].isBeingEaten=!0)}for(let e of c){let[t,i]=e.split("-").map(Number);(null===(n=this.grid[t])||void 0===n?void 0:n[i])&&(this.grid[t][i]=null)}for(let e of h)this.createSpecialAtPosition(e.row,e.col,e.foodType,e.special);this.applyGravity(),this.fillEmpty(),i++}return i>=20&&console.warn("Max cascade iterations reached"),{isValid:!0,matches:[],score:Math.floor(e),cascade:l,specialsCreated:t,matchInfo:{largestMatch:s,totalMatches:o,matchTypes:a}}}determineSpecialCandy(e){return e.length>=5?"color_bomb":"box"===e.type?"wrapped":"diagonal"===e.type&&e.length>=5?"color_bomb":"diagonal"===e.type&&4===e.length||"L"===e.type||"T"===e.type||"plus"===e.type?"wrapped":4===e.length?"horizontal"===e.type?"striped_horizontal":"striped_vertical":"none"}createSpecialAtPosition(e,t,i,l){this.grid[e][t]=this.createCell(e,t,i,l)}findAllMatches(){let e=[],t=new Set;for(let l=0;l<this.rows;l++)for(let s=0;s<this.cols;s++){var i;let o=null===(i=this.grid[l])||void 0===i?void 0:i[s];if(!o||t.has(o.id))continue;let a=this.findBoxMatch(l,s),r=this.findDiagonalMatch(l,s),n=this.findHorizontalMatch(l,s),d=this.findVerticalMatch(l,s),c=this.findLShapeMatch(l,s),h=this.findTShapeMatch(l,s),u=this.findPlusMatch(l,s);u.length>=5?(e.push({cells:u,type:"plus",length:u.length}),u.forEach(e=>t.add(e.id))):h.length>=5?(e.push({cells:h,type:"T",length:h.length}),h.forEach(e=>t.add(e.id))):c.length>=5?(e.push({cells:c,type:"L",length:c.length}),c.forEach(e=>t.add(e.id))):r.length>=4?(e.push({cells:r,type:"diagonal",length:r.length}),r.forEach(e=>t.add(e.id))):a.length>=4?(e.push({cells:a,type:"box",length:a.length}),a.forEach(e=>t.add(e.id))):(n.length>=3&&(e.push({cells:n,type:"horizontal",length:n.length}),n.forEach(e=>t.add(e.id))),d.length>=3&&(e.push({cells:d,type:"vertical",length:d.length}),d.forEach(e=>t.add(e.id))))}return e}findHorizontalMatch(e,t){var i,l,s;let o=null===(i=this.grid[e])||void 0===i?void 0:i[t];if(!o)return[];let a=[o],r=o.foodType;for(let i=t-1;i>=0;i--){let t=null===(l=this.grid[e])||void 0===l?void 0:l[i];if((null==t?void 0:t.foodType)===r)a.unshift(t);else break}for(let i=t+1;i<this.cols;i++){let t=null===(s=this.grid[e])||void 0===s?void 0:s[i];if((null==t?void 0:t.foodType)===r)a.push(t);else break}return a}findVerticalMatch(e,t){var i,l,s;let o=null===(i=this.grid[e])||void 0===i?void 0:i[t];if(!o)return[];let a=[o],r=o.foodType;for(let i=e-1;i>=0;i--){let e=null===(l=this.grid[i])||void 0===l?void 0:l[t];if((null==e?void 0:e.foodType)===r)a.unshift(e);else break}for(let i=e+1;i<this.rows;i++){let e=null===(s=this.grid[i])||void 0===s?void 0:s[t];if((null==e?void 0:e.foodType)===r)a.push(e);else break}return a}findLShapeMatch(e,t){let i=this.findHorizontalMatch(e,t),l=this.findVerticalMatch(e,t);return i.length>=3&&l.length>=3?Array.from(new Set([...i,...l])):[]}findTShapeMatch(e,t){let i=this.findHorizontalMatch(e,t),l=this.findVerticalMatch(e,t);if(i.length>=3&&l.length>=3){var s;let o=null===(s=this.grid[e])||void 0===s?void 0:s[t];if(o&&i.includes(o)&&l.includes(o))return Array.from(new Set([...i,...l]))}return[]}findPlusMatch(e,t){let i=this.findHorizontalMatch(e,t),l=this.findVerticalMatch(e,t);return i.length>=3&&l.length>=3&&i.length+l.length>=7?Array.from(new Set([...i,...l])):[]}findBoxMatch(e,t){var i,l,s,o,a;let r=null===(i=this.grid[e])||void 0===i?void 0:i[t];if(!r)return[];let n=r.foodType,d=[];if(e+1<this.rows&&t+1<this.cols){let i=null===(l=this.grid[e])||void 0===l?void 0:l[t],r=null===(s=this.grid[e])||void 0===s?void 0:s[t+1],c=null===(o=this.grid[e+1])||void 0===o?void 0:o[t],h=null===(a=this.grid[e+1])||void 0===a?void 0:a[t+1];(null==i?void 0:i.foodType)===n&&(null==r?void 0:r.foodType)===n&&(null==c?void 0:c.foodType)===n&&(null==h?void 0:h.foodType)===n&&d.push(i,r,c,h)}return d}findDiagonalMatch(e,t){var i,l,s,o,a;let r=null===(i=this.grid[e])||void 0===i?void 0:i[t];if(!r)return[];let n=r.foodType,d=[],c=[r];for(let i=1;i<5;i++){let s=e+i,o=t+i;if(s>=this.rows||o>=this.cols)break;let a=null===(l=this.grid[s])||void 0===l?void 0:l[o];if((null==a?void 0:a.foodType)===n)c.push(a);else break}c.length>=4&&(d=c);let h=[r];for(let i=1;i<5;i++){let l=e+i,o=t-i;if(l>=this.rows||o<0)break;let a=null===(s=this.grid[l])||void 0===s?void 0:s[o];if((null==a?void 0:a.foodType)===n)h.push(a);else break}h.length>=4&&h.length>d.length&&(d=h);let u=[r];for(let i=1;i<5;i++){let l=e-i,s=t+i;if(l<0||s>=this.cols)break;let a=null===(o=this.grid[l])||void 0===o?void 0:o[s];if((null==a?void 0:a.foodType)===n)u.push(a);else break}u.length>=4&&u.length>d.length&&(d=u);let m=[r];for(let i=1;i<5;i++){let l=e-i,s=t-i;if(l<0||s<0)break;let o=null===(a=this.grid[l])||void 0===a?void 0:a[s];if((null==o?void 0:o.foodType)===n)m.push(o);else break}return m.length>=4&&m.length>d.length&&(d=m),d}applyGravity(){for(let e=0;e<this.cols;e++){let t=this.rows-1;for(let i=this.rows-1;i>=0;i--)null!==this.grid[i][e]&&(i!==t&&(this.grid[t][e]=this.grid[i][e],this.grid[t][e]&&(this.grid[t][e].row=t,this.grid[t][e].isFalling=!0),this.grid[i][e]=null),t--)}}fillEmpty(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++)if(null===this.grid[e][t]){let i=this.createCell(e,t);i.isNew=!0,this.grid[e][t]=i}}activateSpecial(e,t){var i;let l=null===(i=this.grid[e])||void 0===i?void 0:i[t];if(!l||"none"===l.specialType)return{score:0,affectedCells:[]};let s=[],o=0;switch(l.specialType){case"striped_horizontal":for(let t=0;t<this.cols;t++){let i=this.grid[e][t];i&&(s.push(i),this.grid[e][t]=null)}o=20*this.cols;break;case"striped_vertical":for(let e=0;e<this.rows;e++){let i=this.grid[e][t];i&&(s.push(i),this.grid[e][t]=null)}o=20*this.rows;break;case"wrapped":for(let i=Math.max(0,e-1);i<=Math.min(this.rows-1,e+1);i++)for(let e=Math.max(0,t-1);e<=Math.min(this.cols-1,t+1);e++){let t=this.grid[i][e];t&&(s.push(t),this.grid[i][e]=null)}o=30*s.length;break;case"color_bomb":let a=l.foodType;for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++){let i=this.grid[e][t];i&&i.foodType===a&&(s.push(i),this.grid[e][t]=null)}o=50*s.length}return this.applyGravity(),this.fillEmpty(),{score:o,affectedCells:s}}getGrid(){return this.grid}getCell(e,t){var i;return(null===(i=this.grid[e])||void 0===i?void 0:i[t])||null}hasAvailableMoves(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++){if(t<this.cols-1){let i=this.grid[e][t];this.grid[e][t]=this.grid[e][t+1],this.grid[e][t+1]=i;let l=this.findAllMatches().length>0;if(i=this.grid[e][t],this.grid[e][t]=this.grid[e][t+1],this.grid[e][t+1]=i,l)return!0}if(e<this.rows-1){let i=this.grid[e][t];this.grid[e][t]=this.grid[e+1][t],this.grid[e+1][t]=i;let l=this.findAllMatches().length>0;if(i=this.grid[e][t],this.grid[e][t]=this.grid[e+1][t],this.grid[e+1][t]=i,l)return!0}}return!1}constructor(e=8,t=8){this.comboMultiplier=1,this.rows=e,this.cols=t,this.grid=[],this.initializeGrid()}}var r=i(2031),n=i(2023),d=i(1239);function c(e){let{rows:t=8,cols:i=8,onScoreChange:c,onMoveUsed:h,isPaused:u}=e,[m]=(0,s.useState)(()=>new a(t,i)),[p,x]=(0,s.useState)(()=>m.getGrid()),[f,g]=(0,s.useState)(null),[v,b]=(0,s.useState)(!1),[w,y]=(0,s.useState)(0),[j,C]=(0,s.useState)(0),[T,N]=(0,s.useState)(!1),[M,k]=(0,s.useState)(!1),[S,D]=(0,s.useState)(""),[A,z]=(0,s.useState)(null),V=(0,s.useRef)(null),E=async(e,t)=>{if(u||v)return;let i=m.getCell(e,t);if(!i)return;if("none"!==i.specialType){b(!0);let i=m.activateSpecial(e,t);await new Promise(e=>setTimeout(e,300)),x([...m.getGrid()]),await new Promise(e=>setTimeout(e,600)),i.score>0&&(c(i.score),C(i.score),N(!0),setTimeout(()=>N(!1),1e3)),h(),await new Promise(e=>setTimeout(e,400)),b(!1);return}if(!f){r.l.playClick(),g({row:e,col:t});return}if(f.row===e&&f.col===t){r.l.playClick(),g(null);return}if(!m.canSwap(f.row,f.col,e,t)){r.l.playWhoops(),k(!0),D("Select an adjacent candy!"),setTimeout(()=>{k(!1),D("")},800),g(null);return}b(!0);let l=m.swap(f.row,f.col,e,t);if(!l.isValid){r.l.playWhoops(),k(!0),D("No matches! Try another move."),setTimeout(()=>{k(!1),D("")},800),g(null),b(!1);return}if(r.l.playChomp(),await new Promise(e=>setTimeout(e,300)),x([...m.getGrid()]),await new Promise(e=>setTimeout(e,600)),g(null),l.score>0&&(c(l.score),C(l.score),N(!0),setTimeout(()=>N(!1),1e3)),l.matchInfo&&l.matchInfo.largestMatch>=4){let e=l.matchInfo.largestMatch>=7?"MEGA":l.matchInfo.largestMatch>=5?"SUPER":"BIG";z({size:l.matchInfo.largestMatch,type:e}),setTimeout(()=>z(null),1500)}if(l.cascade){let e=w+1;y(e),r.l.playCombo(Math.min(e,5))}else y(0);h(),await new Promise(e=>setTimeout(e,400)),x([...m.getGrid()]),b(!1)},F=e=>{switch(e){case"striped_horizontal":return"═";case"striped_vertical":return"║";case"wrapped":return"✨";case"color_bomb":return"\uD83D\uDCA5";case"rainbow":return"\uD83C\uDF08";default:return null}},Z=(e,t,i)=>{if(!e)return"opacity-0";let l=(null==f?void 0:f.row)===t&&(null==f?void 0:f.col)===i,s=f&&Math.abs(f.row-t)+Math.abs(f.col-i)===1,o=e.isBeingEaten?"animate-crumble":"",a=e.isFalling||e.isNew?"animate-bounce-in":"transition-all duration-300",r="none"!==e.specialType?"shadow-xl":"shadow-lg",n="none"!==e.specialType?"bg-gradient-to-br from-yellow-300 via-yellow-100 to-white":"bg-gradient-to-br from-white to-gray-50";return"".concat("relative flex items-center justify-center text-4xl rounded-2xl cursor-pointer transform hover:scale-105 active:scale-95 border-2"," ").concat(l?"ring-4 ring-yellow-400 ring-offset-2 scale-110 shadow-2xl border-yellow-300 z-10":"border-white/30"," ").concat(s?"ring-2 ring-green-400 ring-offset-1 border-green-300":""," ").concat(o," ").concat(a," ").concat(r," ").concat(n)};return(0,l.jsxs)("div",{className:"relative",ref:V,children:[A&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:(0,l.jsx)("div",{className:"bg-gradient-to-br from-purple-600 via-pink-500 to-red-500 text-white px-12 py-8 rounded-3xl font-black text-5xl animate-pop shadow-2xl border-4 border-yellow-300",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-6xl mb-2 animate-bounce",children:"✨"}),(0,l.jsxs)("div",{className:"text-3xl",children:[A.type," COMBO!"]}),(0,l.jsx)("div",{className:"text-7xl my-2 animate-pulse",children:A.size}),(0,l.jsx)("div",{className:"text-2xl",children:"PIECE MATCH!"})]})})}),T&&!A&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:(0,l.jsxs)("div",{className:"bg-gradient-to-br from-yellow-400 via-orange-400 to-red-400 text-white px-8 py-4 rounded-3xl font-black text-4xl animate-pop shadow-2xl border-4 border-white/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(n.Z,{className:"w-8 h-8 animate-spin"}),"+",j]}),w>0&&(0,l.jsxs)("div",{className:"text-xl font-bold mt-1 animate-pulse",children:["\uD83D\uDD25 COMBO x",w+1,"!"]})]})}),S&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:(0,l.jsxs)("div",{className:"px-8 py-4 rounded-3xl font-bold text-xl shadow-2xl border-4 ".concat(M?"bg-gradient-to-br from-red-500 to-red-600 text-white animate-shake border-red-300":"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-blue-300"),children:[M?"❌":"\uD83D\uDCA1"," ",S]})}),!f&&!v&&(0,l.jsx)("div",{className:"absolute -top-2 left-0 right-0 bg-gradient-to-r from-blue-500 via-blue-600 to-blue-500 text-white px-4 py-3 rounded-2xl text-center text-sm font-bold shadow-xl border-2 border-blue-300 z-20",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:["\uD83C\uDFAF ",(0,l.jsx)("span",{children:"Tap a candy, then tap an adjacent one to swap!"})]})}),f&&!v&&(0,l.jsx)("div",{className:"absolute -top-2 left-0 right-0 bg-gradient-to-r from-green-500 via-green-600 to-green-500 text-white px-4 py-3 rounded-2xl text-center text-sm font-bold shadow-xl border-2 border-green-300 z-20 animate-pulse",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:["✨ ",(0,l.jsx)("span",{children:"Now tap a candy next to the highlighted one!"})]})}),(0,l.jsx)("div",{className:"grid gap-2 p-4 bg-gradient-to-br from-white/20 to-white/10 rounded-3xl backdrop-blur-md shadow-xl border-2 border-white/30 mt-12",style:{gridTemplateColumns:"repeat(".concat(i,", minmax(0, 1fr))"),gridTemplateRows:"repeat(".concat(t,", minmax(0, 1fr))")},children:p.map((e,t)=>e.map((e,i)=>(0,l.jsx)("div",{className:Z(e,t,i),onClick:()=>E(t,i),style:{aspectRatio:"1",minWidth:"40px",minHeight:"40px"},children:e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"relative z-10 drop-shadow-lg",children:o[e.foodType]}),"none"!==e.specialType&&(0,l.jsx)("div",{className:"absolute -top-1 -right-1 text-sm bg-gradient-to-br from-yellow-300 to-orange-400 text-white rounded-full w-7 h-7 flex items-center justify-center font-bold shadow-lg border-2 border-white animate-pulse",children:F(e.specialType)})]})},(null==e?void 0:e.id)||"".concat(t,"-").concat(i))))}),(0,l.jsx)("div",{className:"mt-6 bg-gradient-to-br from-white/20 to-white/10 rounded-3xl p-5 backdrop-blur-md shadow-xl border-2 border-white/30",children:(0,l.jsxs)("div",{className:"text-white space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,l.jsx)(n.Z,{className:"w-5 h-5 text-yellow-300 animate-pulse"}),(0,l.jsx)("span",{className:"font-bold text-lg",children:"Match Types"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,l.jsxs)("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:[(0,l.jsx)("div",{className:"font-bold",children:"\uD83D\uDFE6 2x2 Box"}),(0,l.jsx)("div",{className:"text-yellow-300",children:"15pts each"})]}),(0,l.jsxs)("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:[(0,l.jsx)("div",{className:"font-bold",children:"\uD83D\uDD37 Diagonal"}),(0,l.jsx)("div",{className:"text-yellow-300",children:"20pts each"})]}),(0,l.jsxs)("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:[(0,l.jsx)("div",{className:"font-bold",children:"➖ Row/Col"}),(0,l.jsx)("div",{className:"text-yellow-300",children:"10pts each"})]}),(0,l.jsxs)("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:[(0,l.jsx)("div",{className:"font-bold",children:"\uD83D\uDD25 Combos"}),(0,l.jsx)("div",{className:"text-orange-300",children:"Score x1.5+"})]})]}),(0,l.jsxs)("div",{className:"pt-3 border-t border-white/30",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(d.Z,{className:"w-4 h-4 text-yellow-300"}),(0,l.jsx)("div",{className:"font-semibold",children:"Special Candies"})]}),(0,l.jsx)("div",{className:"text-sm bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:"═ Striped • ✨ Wrapped • \uD83D\uDCA5 Color Bomb"})]})]})})]})}var h=i(8771);let u=(0,i(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=i(9474),p=i(1706),x=i(8623),f=i(8997),g=i(9232),v=i(6595),b=i(9376);function w(){let e=(0,b.useRouter)(),t=(0,b.useSearchParams)().get("level"),[i,o]=(0,s.useState)(t?parseInt(t):1),[a,n]=(0,s.useState)(0),[d,w]=(0,s.useState)(0),[y,j]=(0,s.useState)(5),[C,T]=(0,s.useState)(100),[N,M]=(0,s.useState)(!1),[k,S]=(0,s.useState)("playing"),[D,A]=(0,s.useState)(!0),z=(0,h.Kb)(i);(0,s.useEffect)(()=>{w(z.maxMoves),n(0),S("playing")},[i,z.maxMoves]);let V=()=>100*d,E=()=>{let e=a+V();return e>=z.starThresholds[2]?3:e>=z.starThresholds[1]?2:e>=z.starThresholds[0]?1:0},F=e=>3===e?1e3:2===e?500:0;return(0,l.jsxs)("div",{className:"min-h-screen p-4 flex flex-col safe-top pb-24",children:[(0,l.jsxs)("div",{className:"glass rounded-2xl p-5 mb-4 card-elevated",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("button",{onClick:()=>e.push("/feast"),className:"text-white/80 hover:text-white transition-all hover:scale-110 active:scale-95",title:"Back to Level Select",children:(0,l.jsx)(u,{className:"w-6 h-6"})}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(m.Z,{className:"w-6 h-6 text-yellow-300 drop-shadow-lg"}),(0,l.jsxs)("span",{className:"text-white font-black text-xl tracking-tight",children:["Level ",i]})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("button",{onClick:()=>{let e=!D;A(e),r.l.setEnabled(e),e&&r.l.playClick()},className:"text-white/80 hover:text-white transition-all p-2 hover:bg-white/10 rounded-lg active:scale-95",title:D?"Mute sounds":"Enable sounds",children:D?(0,l.jsx)(p.Z,{className:"w-5 h-5"}):(0,l.jsx)(x.Z,{className:"w-5 h-5"})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-br from-red-500/20 to-red-600/10 px-3 py-1.5 rounded-full border border-red-400/30",children:[(0,l.jsx)(f.Z,{className:"w-5 h-5 text-red-400"}),(0,l.jsx)("span",{className:"text-white font-bold",children:y})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 px-3 py-1.5 rounded-full border border-yellow-400/30",children:[(0,l.jsx)(g.Z,{className:"w-5 h-5 text-yellow-300"}),(0,l.jsx)("span",{className:"text-white font-bold",children:C})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-br from-white/15 to-white/5 rounded-xl p-3 border border-white/20",children:[(0,l.jsx)("div",{className:"text-white/70 text-xs font-medium mb-1",children:"Score"}),(0,l.jsx)("div",{className:"text-white font-black text-2xl",children:a.toLocaleString()}),(0,l.jsxs)("div",{className:"text-white/60 text-xs mt-0.5",children:["Goal: ",z.objectives[0].target.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-gradient-to-br from-white/15 to-white/5 rounded-xl p-3 border border-white/20",children:[(0,l.jsx)("div",{className:"text-white/70 text-xs font-medium mb-1",children:"Moves"}),(0,l.jsx)("div",{className:"text-white font-black text-2xl",children:d}),(0,l.jsxs)("div",{className:"text-white/60 text-xs mt-0.5",children:["Max: ",z.maxMoves]})]})]}),(0,l.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3].map(e=>(0,l.jsx)(v.Z,{className:"w-8 h-8 transition-all ".concat(a>=z.starThresholds[e-1]?"fill-yellow-300 text-yellow-300 scale-110 drop-shadow-lg":"text-white/20")},e))})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:"playing"===k?(0,l.jsx)(c,{rows:z.gridSize.rows,cols:z.gridSize.cols,onScoreChange:e=>{n(t=>{let i=t+e;return i>=z.objectives[0].target&&d>0&&setTimeout(()=>S("win"),500),i})},onMoveUsed:()=>{w(e=>{let t=e-1;return 0===t&&setTimeout(()=>{a>=z.objectives[0].target?S("win"):S("lose")},500),t})},isPaused:N}):"win"===k?(0,l.jsxs)("div",{className:"glass rounded-3xl p-8 max-w-sm w-full text-center card-elevated bg-gradient-to-br from-white/5 to-transparent",children:[(0,l.jsx)("div",{className:"text-7xl mb-4 animate-bounce drop-shadow-2xl",children:"\uD83C\uDF89"}),(0,l.jsx)("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-lg",children:"Level Complete!"}),(0,l.jsxs)("div",{className:"bg-gradient-to-br from-white/15 to-white/5 rounded-2xl p-5 mb-5 border border-white/20",children:[(0,l.jsx)("div",{className:"text-white/80 text-sm font-medium mb-1",children:"Base Score"}),(0,l.jsx)("div",{className:"text-white text-3xl font-black mb-4",children:a.toLocaleString()}),d>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"text-green-300 text-sm font-bold mb-1",children:[d," Moves Remaining!"]}),(0,l.jsxs)("div",{className:"text-green-300 text-2xl font-black mb-4",children:["+",V().toLocaleString()]})]}),F(E())>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"text-yellow-300 text-sm font-bold mb-1",children:[E()," Star Bonus!"]}),(0,l.jsxs)("div",{className:"text-yellow-300 text-2xl font-black mb-4",children:["+",F(E()).toLocaleString()]})]}),(0,l.jsxs)("div",{className:"border-t border-white/30 pt-4",children:[(0,l.jsx)("div",{className:"text-white/80 text-sm font-medium mb-1",children:"Total Score"}),(0,l.jsx)("div",{className:"text-white text-4xl font-black drop-shadow-lg",children:(()=>{let e=E();return a+V()+F(e)})().toLocaleString()})]})]}),(0,l.jsx)("div",{className:"flex justify-center gap-4 mb-8",children:[1,2,3].map(e=>(0,l.jsx)(v.Z,{className:"w-14 h-14 ".concat(E()>=e?"fill-yellow-300 text-yellow-300 animate-bounce drop-shadow-lg":"text-white/20"),style:{animationDelay:"".concat(100*e,"ms")}},e))}),(0,l.jsx)("button",{onClick:()=>{o(e=>e+1)},className:"w-full bg-gradient-to-r from-white to-white/95 text-red-600 py-4 rounded-2xl font-black text-xl hover:from-white/95 hover:to-white/90 active:scale-95 transition-all card-elevated shadow-xl",children:"Next Level"})]}):(0,l.jsxs)("div",{className:"glass rounded-3xl p-8 max-w-sm w-full text-center card-elevated bg-gradient-to-br from-white/5 to-transparent",children:[(0,l.jsx)("div",{className:"text-7xl mb-4 drop-shadow-2xl",children:"\uD83D\uDE22"}),(0,l.jsx)("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-lg",children:"Level Failed"}),(0,l.jsxs)("div",{className:"bg-white/10 rounded-xl p-4 mb-3",children:[(0,l.jsxs)("p",{className:"text-white/80 text-xl font-bold mb-1",children:["Score: ",a.toLocaleString()]}),(0,l.jsxs)("p",{className:"text-white/60 text-sm",children:["Goal: ",z.objectives[0].target.toLocaleString()," points"]})]}),y>0?(0,l.jsxs)("button",{onClick:()=>{w(z.maxMoves),n(0),S("playing"),j(e=>Math.max(0,e-1))},className:"w-full bg-gradient-to-r from-white to-white/95 text-red-600 py-4 rounded-2xl font-black text-xl hover:from-white/95 hover:to-white/90 active:scale-95 transition-all card-elevated shadow-xl",children:["Retry (",y," lives left)"]}):(0,l.jsxs)("div",{className:"text-white/80 bg-white/10 rounded-xl p-4",children:[(0,l.jsx)("p",{className:"mb-2 text-lg font-bold",children:"Out of lives!"}),(0,l.jsx)("p",{className:"text-sm text-white/60",children:"Lives regenerate every 30 minutes"})]})]})})]})}function y(){return(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-white/30 border-t-white"})}),children:(0,l.jsx)(w,{})})}},8771:function(e,t,i){"use strict";i.d(t,{Kb:function(){return o},s_:function(){return l}});let l={goodFoods:[{emoji:"\uD83C\uDF6C",color:"#22c55e",name:"Candy Cane",points:10},{emoji:"\uD83C\uDF6A",color:"#fbbf24",name:"Gingerbread",points:10},{emoji:"\uD83C\uDF82",color:"#ec4899",name:"Cake",points:10},{emoji:"\uD83C\uDF69",color:"#f97316",name:"Donut",points:10},{emoji:"\uD83E\uDDC1",color:"#a855f7",name:"Cupcake",points:10},{emoji:"\uD83C\uDF70",color:"#06b6d4",name:"Pie",points:10}],goldenFoods:[{emoji:"⭐",color:"#fbbf24",name:"Golden Star",points:50},{emoji:"\uD83C\uDF1F",color:"#facc15",name:"Shining Star",points:50}],hazards:[{emoji:"\uD83C\uDFCF",color:"#ef4444",name:"Baseball Bat",points:0},{emoji:"\uD83E\uDDE6",color:"#8b5cf6",name:"Smelly Sock",points:0},{emoji:"\uD83E\uDEA8",color:"#78716c",name:"Rock",points:0},{emoji:"\uD83D\uDD28",color:"#dc2626",name:"Hammer",points:0}]},s=[{level:1,gridSize:{rows:8,cols:7},maxMoves:25,objectives:[{type:"score",target:1e3,description:"Score 1,000 points"}],starThresholds:[1e3,2e3,3500],difficulty:"easy"},{level:2,gridSize:{rows:8,cols:7},maxMoves:22,objectives:[{type:"score",target:1500,description:"Score 1,500 points"}],starThresholds:[1500,2500,4e3],difficulty:"easy"},{level:3,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:2e3,description:"Score 2,000 points"}],starThresholds:[2e3,3500,5500],difficulty:"easy"},{level:4,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:2500,description:"Score 2,500 points"}],starThresholds:[2500,4e3,6500],difficulty:"easy"},{level:5,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:3e3,description:"Score 3,000 points"}],starThresholds:[3e3,5e3,8e3],difficulty:"easy"},...Array.from({length:10},(e,t)=>{let i=t+6,l=4e3+500*i;return{level:i,gridSize:{rows:9,cols:7},maxMoves:20,objectives:[{type:"score",target:l,description:"Score ".concat(l.toLocaleString()," points")}],starThresholds:[l,Math.floor(1.5*l),Math.floor(2.2*l)],difficulty:"medium"}}),...Array.from({length:15},(e,t)=>{let i=t+16,l=1e4+700*i;return{level:i,gridSize:{rows:9,cols:7},maxMoves:Math.max(12,18-Math.floor(t/5)),objectives:[{type:"score",target:l,description:"Score ".concat(l.toLocaleString()," points")}],starThresholds:[l,Math.floor(1.4*l),Math.floor(2*l)],difficulty:"hard"}})];function o(e){return s.find(t=>t.level===e)||s[0]}},2031:function(e,t,i){"use strict";i.d(t,{l:function(){return l}});let l=new class{async initialize(){if(!this.initialized&&this.audioContext){if("suspended"===this.audioContext.state)try{await this.audioContext.resume(),this.initialized=!0,console.log("Audio initialized")}catch(e){console.warn("Failed to initialize audio:",e)}else this.initialized=!0}}setEnabled(e){this.enabled=e,e&&!this.initialized&&this.initialize()}getEnabled(){return this.enabled}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}async playTone(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sine",l=arguments.length>3?arguments[3]:void 0;if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let s=this.audioContext.createOscillator(),o=this.audioContext.createGain();s.connect(o),o.connect(this.audioContext.destination),s.frequency.value=e,s.type=i;let a=(null!=l?l:this.volume)*.5;o.gain.setValueAtTime(a,this.audioContext.currentTime),o.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)}async playMatch(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain();t.connect(i),i.connect(this.audioContext.destination),t.type="sine",t.frequency.setValueAtTime(400,e),t.frequency.exponentialRampToValueAtTime(600,e+.1),i.gain.setValueAtTime(.3*this.volume,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),t.start(e),t.stop(e+.15)}async playChomp(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;for(let t=0;t<3;t++){let i=this.audioContext.createOscillator(),l=this.audioContext.createGain(),s=this.audioContext.createBiquadFilter();i.connect(s),s.connect(l),l.connect(this.audioContext.destination),i.type="square",s.type="lowpass",s.frequency.value=800;let o=e+.08*t;i.frequency.setValueAtTime(200-30*t,o),i.frequency.exponentialRampToValueAtTime(100,o+.06),l.gain.setValueAtTime(.4*this.volume,o),l.gain.exponentialRampToValueAtTime(.01,o+.06),i.start(o),i.stop(o+.06)}}async playWhoops(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain();t.connect(i),i.connect(this.audioContext.destination),t.type="sawtooth",t.frequency.setValueAtTime(300,e),t.frequency.exponentialRampToValueAtTime(150,e+.2),i.gain.setValueAtTime(.3*this.volume,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),t.start(e),t.stop(e+.2)}async playCombo(e){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let t=400+100*e,i=this.audioContext.currentTime;for(let l=0;l<e;l++){let e=this.audioContext.createOscillator(),s=this.audioContext.createGain();e.connect(s),s.connect(this.audioContext.destination),e.type="sine";let o=i+.05*l;e.frequency.setValueAtTime(t+50*l,o),s.gain.setValueAtTime(.25*this.volume,o),s.gain.exponentialRampToValueAtTime(.01,o+.1),e.start(o),e.stop(o+.1)}}async playSuccess(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;[523.25,659.25,783.99,1046.5].forEach((t,i)=>{let l=this.audioContext.createOscillator(),s=this.audioContext.createGain();l.connect(s),s.connect(this.audioContext.destination),l.type="sine";let o=e+.1*i;l.frequency.value=t,s.gain.setValueAtTime(.3*this.volume,o),s.gain.exponentialRampToValueAtTime(.01,o+.2),l.start(o),l.stop(o+.2)})}playClick(){this.playTone(600,.05,"sine",.2*this.volume)}async playMunch(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain(),l=this.audioContext.createBiquadFilter();t.connect(l),l.connect(i),i.connect(this.audioContext.destination),t.type="square",l.type="lowpass",l.frequency.value=1200,t.frequency.setValueAtTime(350,e),t.frequency.exponentialRampToValueAtTime(250,e+.08),i.gain.setValueAtTime(.35*this.volume,e),i.gain.exponentialRampToValueAtTime(.01,e+.08),t.start(e),t.stop(e+.08)}async playYuck(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;for(let t=0;t<2;t++){let i=this.audioContext.createOscillator(),l=this.audioContext.createGain(),s=this.audioContext.createBiquadFilter();i.connect(s),s.connect(l),l.connect(this.audioContext.destination),i.type="sawtooth",s.type="lowpass",s.frequency.value=600;let o=e+.12*t;i.frequency.setValueAtTime(180-20*t,o),i.frequency.exponentialRampToValueAtTime(120,o+.1),l.gain.setValueAtTime(.4*this.volume,o),l.gain.exponentialRampToValueAtTime(.01,o+.1),i.start(o),i.stop(o+.1)}}constructor(){this.audioContext=null,this.enabled=!0,this.volume=.3,this.initialized=!1;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Web Audio API not supported")}}}},9763:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});var l=i(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let i=(0,l.forwardRef)((i,a)=>{let{color:r="currentColor",size:n=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:h="",children:u,...m}=i;return(0,l.createElement)("svg",{ref:a,...s,width:n,height:n,stroke:r,strokeWidth:c?24*Number(d)/Number(n):d,className:["lucide","lucide-".concat(o(e)),h].join(" "),...m},[...t.map(e=>{let[t,i]=e;return(0,l.createElement)(t,i)}),...Array.isArray(u)?u:[u]])});return i.displayName="".concat(e),i}},9232:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(9763).Z)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},8997:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},2023:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(9763).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},6595:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9474:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},1706:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(9763).Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]])},8623:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(9763).Z)("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},1239:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});let l=(0,i(9763).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},9376:function(e,t,i){"use strict";var l=i(5475);i.o(l,"usePathname")&&i.d(t,{usePathname:function(){return l.usePathname}}),i.o(l,"useRouter")&&i.d(t,{useRouter:function(){return l.useRouter}}),i.o(l,"useSearchParams")&&i.d(t,{useSearchParams:function(){return l.useSearchParams}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9015)}),_N_E=e.O()}]);