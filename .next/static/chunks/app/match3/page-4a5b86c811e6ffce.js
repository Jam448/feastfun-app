(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{9015:function(e,t,l){Promise.resolve().then(l.bind(l,2626))},2626:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return j}});var i=l(7437),s=l(2265),r=l(3145);let a={candy_cane:"\uD83C\uDF6C",gingerbread:"\uD83C\uDF6A",cookie:"\uD83E\uDD60",cupcake:"\uD83E\uDDC1",pudding:"\uD83C\uDF6E",pie:"\uD83E\uDD67"};class o{generateRandomFood(){let e=["candy_cane","gingerbread","cookie","cupcake","pudding","pie"];return e[Math.floor(Math.random()*e.length)]}createCell(e,t,l){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return{id:"".concat(e,"-").concat(t,"-").concat(Date.now(),"-").concat(Math.random()),row:e,col:t,foodType:l||this.generateRandomFood(),specialType:i,isMatched:!1,isFalling:!1,isNew:!1,isBeingEaten:!1}}initializeGrid(){this.grid=Array(this.rows).fill(null).map(()=>Array(this.cols).fill(null));for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++){let l;let i=0;do l=this.generateRandomFood(),i++;while(i<10&&this.wouldCreateMatch(e,t,l));this.grid[e][t]=this.createCell(e,t,l)}}wouldCreateMatch(e,t,l){var i,s,r,a,o,n,d,c;let h=1;for(let r=t-1;r>=0&&(null===(s=this.grid[e])||void 0===s?void 0:null===(i=s[r])||void 0===i?void 0:i.foodType)===l;r--)h++;for(let i=t+1;i<this.cols&&(null===(a=this.grid[e])||void 0===a?void 0:null===(r=a[i])||void 0===r?void 0:r.foodType)===l;i++)h++;if(h>=3)return!0;let u=1;for(let i=e-1;i>=0&&(null===(n=this.grid[i])||void 0===n?void 0:null===(o=n[t])||void 0===o?void 0:o.foodType)===l;i--)u++;for(let i=e+1;i<this.rows&&(null===(c=this.grid[i])||void 0===c?void 0:null===(d=c[t])||void 0===d?void 0:d.foodType)===l;i++)u++;return u>=3}canSwap(e,t,l,i){var s,r;let a=null===(s=this.grid[e])||void 0===s?void 0:s[t],o=null===(r=this.grid[l])||void 0===r?void 0:r[i];if(!a||!o)return!1;let n=Math.abs(e-l),d=Math.abs(t-i);return 1===n&&0===d||0===n&&1===d}swap(e,t,l,i){if(!this.canSwap(e,t,l,i))return{isValid:!1,matches:[],score:0,cascade:!1,specialsCreated:[]};let s=this.grid[e][t];if(this.grid[e][t]=this.grid[l][i],this.grid[l][i]=s,this.grid[e][t]&&(this.grid[e][t].row=e,this.grid[e][t].col=t),this.grid[l][i]&&(this.grid[l][i].row=l,this.grid[l][i].col=i),0===this.findAllMatches().length){let s=this.grid[e][t];return this.grid[e][t]=this.grid[l][i],this.grid[l][i]=s,this.grid[e][t]&&(this.grid[e][t].row=e,this.grid[e][t].col=t),this.grid[l][i]&&(this.grid[l][i].row=l,this.grid[l][i].col=i),{isValid:!1,matches:[],score:0,cascade:!1,specialsCreated:[]}}return this.comboMultiplier=1,this.processAllMatches()}processAllMatches(){let e=0,t=[],l=0,i=!1,s=0,r=0,a=[];for(;l<20;){var o,n;let d=this.findAllMatches();if(0===d.length)break;l>0&&(i=!0,this.comboMultiplier+=.5);let c=new Set,h=[];for(let l of d){s=Math.max(s,l.length),r++,l.length>=5&&a.push("".concat(l.length,"-piece"));let i=0;i=3===l.length?60:4===l.length?120:5===l.length?200:6===l.length?400:800,"box"===l.type?i=Math.floor(1.5*i):"diagonal"===l.type?i=Math.floor(2*i):("L"===l.type||"T"===l.type||"plus"===l.type)&&(i=Math.floor(1.75*i)),e+=Math.floor(i*this.comboMultiplier);let o=this.determineSpecialCandy(l);if("none"!==o&&l.cells.length>0){t.push(o);let e=l.cells[Math.floor(l.cells.length/2)];h.push({row:e.row,col:e.col,foodType:e.foodType,special:o})}for(let e of l.cells)c.add("".concat(e.row,"-").concat(e.col))}for(let e of h)c.delete("".concat(e.row,"-").concat(e.col));for(let e of c){let[t,l]=e.split("-").map(Number);(null===(o=this.grid[t])||void 0===o?void 0:o[l])&&(this.grid[t][l].isBeingEaten=!0)}for(let e of c){let[t,l]=e.split("-").map(Number);(null===(n=this.grid[t])||void 0===n?void 0:n[l])&&(this.grid[t][l]=null)}for(let e of h)this.createSpecialAtPosition(e.row,e.col,e.foodType,e.special);this.applyGravity(),this.fillEmpty(),l++}return l>=20&&console.warn("Max cascade iterations reached"),{isValid:!0,matches:[],score:Math.floor(e),cascade:i,specialsCreated:t,matchInfo:{largestMatch:s,totalMatches:r,matchTypes:a}}}determineSpecialCandy(e){return e.length>=5?"color_bomb":"box"===e.type?"wrapped":"diagonal"===e.type&&e.length>=5?"color_bomb":"diagonal"===e.type&&4===e.length||"L"===e.type||"T"===e.type||"plus"===e.type?"wrapped":4===e.length?"horizontal"===e.type?"striped_horizontal":"striped_vertical":"none"}createSpecialAtPosition(e,t,l,i){this.grid[e][t]=this.createCell(e,t,l,i)}findAllMatches(){let e=[],t=new Set;for(let i=0;i<this.rows;i++)for(let s=0;s<this.cols;s++){var l;let r=null===(l=this.grid[i])||void 0===l?void 0:l[s];if(!r||t.has(r.id))continue;let a=this.findBoxMatch(i,s),o=this.findDiagonalMatch(i,s),n=this.findHorizontalMatch(i,s),d=this.findVerticalMatch(i,s),c=this.findLShapeMatch(i,s),h=this.findTShapeMatch(i,s),u=this.findPlusMatch(i,s);u.length>=5?(e.push({cells:u,type:"plus",length:u.length}),u.forEach(e=>t.add(e.id))):h.length>=5?(e.push({cells:h,type:"T",length:h.length}),h.forEach(e=>t.add(e.id))):c.length>=5?(e.push({cells:c,type:"L",length:c.length}),c.forEach(e=>t.add(e.id))):o.length>=4?(e.push({cells:o,type:"diagonal",length:o.length}),o.forEach(e=>t.add(e.id))):a.length>=4?(e.push({cells:a,type:"box",length:a.length}),a.forEach(e=>t.add(e.id))):(n.length>=3&&(e.push({cells:n,type:"horizontal",length:n.length}),n.forEach(e=>t.add(e.id))),d.length>=3&&(e.push({cells:d,type:"vertical",length:d.length}),d.forEach(e=>t.add(e.id))))}return e}findHorizontalMatch(e,t){var l,i,s;let r=null===(l=this.grid[e])||void 0===l?void 0:l[t];if(!r)return[];let a=[r],o=r.foodType;for(let l=t-1;l>=0;l--){let t=null===(i=this.grid[e])||void 0===i?void 0:i[l];if((null==t?void 0:t.foodType)===o)a.unshift(t);else break}for(let l=t+1;l<this.cols;l++){let t=null===(s=this.grid[e])||void 0===s?void 0:s[l];if((null==t?void 0:t.foodType)===o)a.push(t);else break}return a}findVerticalMatch(e,t){var l,i,s;let r=null===(l=this.grid[e])||void 0===l?void 0:l[t];if(!r)return[];let a=[r],o=r.foodType;for(let l=e-1;l>=0;l--){let e=null===(i=this.grid[l])||void 0===i?void 0:i[t];if((null==e?void 0:e.foodType)===o)a.unshift(e);else break}for(let l=e+1;l<this.rows;l++){let e=null===(s=this.grid[l])||void 0===s?void 0:s[t];if((null==e?void 0:e.foodType)===o)a.push(e);else break}return a}findLShapeMatch(e,t){let l=this.findHorizontalMatch(e,t),i=this.findVerticalMatch(e,t);return l.length>=3&&i.length>=3?Array.from(new Set([...l,...i])):[]}findTShapeMatch(e,t){let l=this.findHorizontalMatch(e,t),i=this.findVerticalMatch(e,t);if(l.length>=3&&i.length>=3){var s;let r=null===(s=this.grid[e])||void 0===s?void 0:s[t];if(r&&l.includes(r)&&i.includes(r))return Array.from(new Set([...l,...i]))}return[]}findPlusMatch(e,t){let l=this.findHorizontalMatch(e,t),i=this.findVerticalMatch(e,t);return l.length>=3&&i.length>=3&&l.length+i.length>=7?Array.from(new Set([...l,...i])):[]}findBoxMatch(e,t){var l,i,s,r,a;let o=null===(l=this.grid[e])||void 0===l?void 0:l[t];if(!o)return[];let n=o.foodType,d=[];if(e+1<this.rows&&t+1<this.cols){let l=null===(i=this.grid[e])||void 0===i?void 0:i[t],o=null===(s=this.grid[e])||void 0===s?void 0:s[t+1],c=null===(r=this.grid[e+1])||void 0===r?void 0:r[t],h=null===(a=this.grid[e+1])||void 0===a?void 0:a[t+1];(null==l?void 0:l.foodType)===n&&(null==o?void 0:o.foodType)===n&&(null==c?void 0:c.foodType)===n&&(null==h?void 0:h.foodType)===n&&d.push(l,o,c,h)}return d}findDiagonalMatch(e,t){var l,i,s,r,a;let o=null===(l=this.grid[e])||void 0===l?void 0:l[t];if(!o)return[];let n=o.foodType,d=[],c=[o];for(let l=1;l<5;l++){let s=e+l,r=t+l;if(s>=this.rows||r>=this.cols)break;let a=null===(i=this.grid[s])||void 0===i?void 0:i[r];if((null==a?void 0:a.foodType)===n)c.push(a);else break}c.length>=4&&(d=c);let h=[o];for(let l=1;l<5;l++){let i=e+l,r=t-l;if(i>=this.rows||r<0)break;let a=null===(s=this.grid[i])||void 0===s?void 0:s[r];if((null==a?void 0:a.foodType)===n)h.push(a);else break}h.length>=4&&h.length>d.length&&(d=h);let u=[o];for(let l=1;l<5;l++){let i=e-l,s=t+l;if(i<0||s>=this.cols)break;let a=null===(r=this.grid[i])||void 0===r?void 0:r[s];if((null==a?void 0:a.foodType)===n)u.push(a);else break}u.length>=4&&u.length>d.length&&(d=u);let x=[o];for(let l=1;l<5;l++){let i=e-l,s=t-l;if(i<0||s<0)break;let r=null===(a=this.grid[i])||void 0===a?void 0:a[s];if((null==r?void 0:r.foodType)===n)x.push(r);else break}return x.length>=4&&x.length>d.length&&(d=x),d}applyGravity(){for(let e=0;e<this.cols;e++){let t=this.rows-1;for(let l=this.rows-1;l>=0;l--)null!==this.grid[l][e]&&(l!==t&&(this.grid[t][e]=this.grid[l][e],this.grid[t][e]&&(this.grid[t][e].row=t,this.grid[t][e].isFalling=!0),this.grid[l][e]=null),t--)}}fillEmpty(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++)if(null===this.grid[e][t]){let l=this.createCell(e,t);l.isNew=!0,this.grid[e][t]=l}}activateSpecial(e,t){var l;let i=null===(l=this.grid[e])||void 0===l?void 0:l[t];if(!i||"none"===i.specialType)return{score:0,affectedCells:[]};let s=[],r=0;switch(i.specialType){case"striped_horizontal":for(let t=0;t<this.cols;t++){let l=this.grid[e][t];l&&(s.push(l),this.grid[e][t]=null)}r=20*this.cols;break;case"striped_vertical":for(let e=0;e<this.rows;e++){let l=this.grid[e][t];l&&(s.push(l),this.grid[e][t]=null)}r=20*this.rows;break;case"wrapped":for(let l=Math.max(0,e-1);l<=Math.min(this.rows-1,e+1);l++)for(let e=Math.max(0,t-1);e<=Math.min(this.cols-1,t+1);e++){let t=this.grid[l][e];t&&(s.push(t),this.grid[l][e]=null)}r=30*s.length;break;case"color_bomb":let a=i.foodType;for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++){let l=this.grid[e][t];l&&l.foodType===a&&(s.push(l),this.grid[e][t]=null)}r=50*s.length}return this.applyGravity(),this.fillEmpty(),{score:r,affectedCells:s}}getGrid(){return this.grid}getCell(e,t){var l;return(null===(l=this.grid[e])||void 0===l?void 0:l[t])||null}hasAvailableMoves(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++){if(t<this.cols-1){let l=this.grid[e][t];this.grid[e][t]=this.grid[e][t+1],this.grid[e][t+1]=l;let i=this.findAllMatches().length>0;if(l=this.grid[e][t],this.grid[e][t]=this.grid[e][t+1],this.grid[e][t+1]=l,i)return!0}if(e<this.rows-1){let l=this.grid[e][t];this.grid[e][t]=this.grid[e+1][t],this.grid[e+1][t]=l;let i=this.findAllMatches().length>0;if(l=this.grid[e][t],this.grid[e][t]=this.grid[e+1][t],this.grid[e+1][t]=l,i)return!0}}return!1}constructor(e=8,t=8){this.comboMultiplier=1,this.rows=e,this.cols=t,this.grid=[],this.initializeGrid()}}var n=l(2031),d=l(2023),c=l(1239);function h(e){let{rows:t=8,cols:l=8,onScoreChange:r,onMoveUsed:h,isPaused:u}=e,[x]=(0,s.useState)(()=>new o(t,l)),[m,g]=(0,s.useState)(()=>x.getGrid()),[p,f]=(0,s.useState)(null),[v,b]=(0,s.useState)(!1),[w,y]=(0,s.useState)(0),[j,N]=(0,s.useState)(0),[M,k]=(0,s.useState)(!1),[T,S]=(0,s.useState)(!1),[D,C]=(0,s.useState)(""),[E,A]=(0,s.useState)(null),z=(0,s.useRef)(null),L=async(e,t)=>{if(u||v)return;let l=x.getCell(e,t);if(!l)return;if("none"!==l.specialType){b(!0);let l=x.activateSpecial(e,t);await new Promise(e=>setTimeout(e,300)),g([...x.getGrid()]),await new Promise(e=>setTimeout(e,600)),l.score>0&&(r(l.score),N(l.score),k(!0),setTimeout(()=>k(!1),1e3)),h(),await new Promise(e=>setTimeout(e,400)),b(!1);return}if(!p){n.l.playClick(),f({row:e,col:t});return}if(p.row===e&&p.col===t){n.l.playClick(),f(null);return}if(!x.canSwap(p.row,p.col,e,t)){n.l.playWhoops(),S(!0),C("Select an adjacent candy!"),setTimeout(()=>{S(!1),C("")},800),f(null);return}b(!0);let i=x.swap(p.row,p.col,e,t);if(!i.isValid){n.l.playWhoops(),S(!0),C("No matches! Try another move."),setTimeout(()=>{S(!1),C("")},800),f(null),b(!1);return}if(n.l.playChomp(),await new Promise(e=>setTimeout(e,300)),g([...x.getGrid()]),await new Promise(e=>setTimeout(e,600)),f(null),i.score>0&&(r(i.score),N(i.score),k(!0),setTimeout(()=>k(!1),1e3)),i.matchInfo&&i.matchInfo.largestMatch>=4){let e=i.matchInfo.largestMatch>=7?"MEGA":i.matchInfo.largestMatch>=5?"SUPER":"BIG";A({size:i.matchInfo.largestMatch,type:e}),setTimeout(()=>A(null),1500)}if(i.cascade){let e=w+1;y(e),n.l.playCombo(Math.min(e,5))}else y(0);h(),await new Promise(e=>setTimeout(e,400)),g([...x.getGrid()]),b(!1)},Z=e=>{switch(e){case"striped_horizontal":return"═";case"striped_vertical":return"║";case"wrapped":return"✨";case"color_bomb":return"\uD83D\uDCA5";case"rainbow":return"\uD83C\uDF08";default:return null}},_=(e,t,l)=>{if(!e)return"opacity-0";let i=(null==p?void 0:p.row)===t&&(null==p?void 0:p.col)===l,s=p&&Math.abs(p.row-t)+Math.abs(p.col-l)===1,r=e.isBeingEaten?"animate-crumble":"",a=e.isFalling||e.isNew?"animate-bounce-in":"transition-all duration-300",o="none"!==e.specialType?"shadow-xl":"shadow-lg",n="none"!==e.specialType?"bg-gradient-to-br from-yellow-300 via-yellow-100 to-white":"bg-gradient-to-br from-white to-gray-50";return"".concat("relative flex items-center justify-center text-4xl rounded-2xl cursor-pointer transform hover:scale-105 active:scale-95 border-2"," ").concat(i?"ring-4 ring-yellow-400 ring-offset-2 scale-110 shadow-2xl border-yellow-300 z-10":"border-white/30"," ").concat(s?"ring-2 ring-green-400 ring-offset-1 border-green-300":""," ").concat(r," ").concat(a," ").concat(o," ").concat(n)};return(0,i.jsxs)("div",{className:"relative",ref:z,children:[E&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:(0,i.jsx)("div",{className:"bg-gradient-to-br from-purple-600 via-pink-500 to-red-500 text-white px-12 py-8 rounded-3xl font-black text-5xl animate-pop shadow-2xl border-4 border-yellow-300",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-6xl mb-2 animate-bounce",children:"✨"}),(0,i.jsxs)("div",{className:"text-3xl",children:[E.type," COMBO!"]}),(0,i.jsx)("div",{className:"text-7xl my-2 animate-pulse",children:E.size}),(0,i.jsx)("div",{className:"text-2xl",children:"PIECE MATCH!"})]})})}),M&&!E&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:(0,i.jsxs)("div",{className:"bg-gradient-to-br from-yellow-400 via-orange-400 to-red-400 text-white px-8 py-4 rounded-3xl font-black text-4xl animate-pop shadow-2xl border-4 border-white/50",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(d.Z,{className:"w-8 h-8 animate-spin"}),"+",j]}),w>0&&(0,i.jsxs)("div",{className:"text-xl font-bold mt-1 animate-pulse",children:["\uD83D\uDD25 COMBO x",w+1,"!"]})]})}),D&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:(0,i.jsxs)("div",{className:"px-8 py-4 rounded-3xl font-bold text-xl shadow-2xl border-4 ".concat(T?"bg-gradient-to-br from-red-500 to-red-600 text-white animate-shake border-red-300":"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-blue-300"),children:[T?"❌":"\uD83D\uDCA1"," ",D]})}),!p&&!v&&(0,i.jsx)("div",{className:"absolute -top-2 left-0 right-0 bg-gradient-to-r from-blue-500 via-blue-600 to-blue-500 text-white px-4 py-3 rounded-2xl text-center text-sm font-bold shadow-xl border-2 border-blue-300 z-20",children:(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2",children:["\uD83C\uDFAF ",(0,i.jsx)("span",{children:"Tap a candy, then tap an adjacent one to swap!"})]})}),p&&!v&&(0,i.jsx)("div",{className:"absolute -top-2 left-0 right-0 bg-gradient-to-r from-green-500 via-green-600 to-green-500 text-white px-4 py-3 rounded-2xl text-center text-sm font-bold shadow-xl border-2 border-green-300 z-20 animate-pulse",children:(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2",children:["✨ ",(0,i.jsx)("span",{children:"Now tap a candy next to the highlighted one!"})]})}),(0,i.jsx)("div",{className:"grid gap-2 p-4 bg-gradient-to-br from-white/20 to-white/10 rounded-3xl backdrop-blur-md shadow-xl border-2 border-white/30 mt-12",style:{gridTemplateColumns:"repeat(".concat(l,", minmax(0, 1fr))"),gridTemplateRows:"repeat(".concat(t,", minmax(0, 1fr))")},children:m.map((e,t)=>e.map((e,l)=>(0,i.jsx)("div",{className:_(e,t,l),onClick:()=>L(t,l),style:{aspectRatio:"1",minWidth:"40px",minHeight:"40px"},children:e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"relative z-10 drop-shadow-lg",children:a[e.foodType]}),"none"!==e.specialType&&(0,i.jsx)("div",{className:"absolute -top-1 -right-1 text-sm bg-gradient-to-br from-yellow-300 to-orange-400 text-white rounded-full w-7 h-7 flex items-center justify-center font-bold shadow-lg border-2 border-white animate-pulse",children:Z(e.specialType)})]})},(null==e?void 0:e.id)||"".concat(t,"-").concat(l))))}),(0,i.jsx)("div",{className:"mt-6 bg-gradient-to-br from-white/20 to-white/10 rounded-3xl p-5 backdrop-blur-md shadow-xl border-2 border-white/30",children:(0,i.jsxs)("div",{className:"text-white space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,i.jsx)(d.Z,{className:"w-5 h-5 text-yellow-300 animate-pulse"}),(0,i.jsx)("span",{className:"font-bold text-lg",children:"Match Types"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,i.jsxs)("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:[(0,i.jsx)("div",{className:"font-bold",children:"\uD83D\uDFE6 2x2 Box"}),(0,i.jsx)("div",{className:"text-yellow-300",children:"15pts each"})]}),(0,i.jsxs)("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:[(0,i.jsx)("div",{className:"font-bold",children:"\uD83D\uDD37 Diagonal"}),(0,i.jsx)("div",{className:"text-yellow-300",children:"20pts each"})]}),(0,i.jsxs)("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:[(0,i.jsx)("div",{className:"font-bold",children:"➖ Row/Col"}),(0,i.jsx)("div",{className:"text-yellow-300",children:"10pts each"})]}),(0,i.jsxs)("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:[(0,i.jsx)("div",{className:"font-bold",children:"\uD83D\uDD25 Combos"}),(0,i.jsx)("div",{className:"text-orange-300",children:"Score x1.5+"})]})]}),(0,i.jsxs)("div",{className:"pt-3 border-t border-white/30",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)(c.Z,{className:"w-4 h-4 text-yellow-300"}),(0,i.jsx)("div",{className:"font-semibold",children:"Special Candies"})]}),(0,i.jsx)("div",{className:"text-sm bg-white/10 rounded-xl p-2 backdrop-blur-sm",children:"═ Striped • ✨ Wrapped • \uD83D\uDCA5 Color Bomb"})]})]})})]})}var u=l(8771);let x=(0,l(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=l(9474),g=l(1706),p=l(8623),f=l(8997),v=l(9232),b=l(6595),w=l(9376);function y(){let e=(0,w.useRouter)(),t=(0,w.useSearchParams)(),l=null==t?void 0:t.get("level"),[a,o]=(0,s.useState)(l?parseInt(l):1),[d,c]=(0,s.useState)(0),[y,j]=(0,s.useState)(0),[N,M]=(0,s.useState)(5),[k,T]=(0,s.useState)(100),[S,D]=(0,s.useState)(!1),[C,E]=(0,s.useState)("playing"),[A,z]=(0,s.useState)(!0),L=(0,u.Kb)(a);(0,s.useEffect)(()=>{j(L.maxMoves),c(0),E("playing")},[a,L.maxMoves]);let Z=()=>100*y,_=()=>{let e=d+Z();return e>=L.starThresholds[2]?3:e>=L.starThresholds[1]?2:e>=L.starThresholds[0]?1:0},F=e=>3===e?1e3:2===e?500:0;return(0,i.jsxs)("div",{className:"min-h-screen p-4 flex flex-col safe-top pb-24",children:[(0,i.jsxs)("div",{className:"glass rounded-2xl p-5 mb-4 card-elevated",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("button",{onClick:()=>e.push("/feast"),className:"text-white/80 hover:text-white transition-all hover:scale-110 active:scale-95",title:"Back to Level Select",children:(0,i.jsx)(x,{className:"w-6 h-6"})}),(0,i.jsx)("div",{className:"relative w-10 h-10",children:(0,i.jsx)(r.default,{src:"/santa_pockets.png",alt:"Santa Pockets",fill:!0,className:"object-contain drop-shadow-lg"})}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(m.Z,{className:"w-6 h-6 text-yellow-300 drop-shadow-lg"}),(0,i.jsxs)("span",{className:"text-white font-black text-xl tracking-tight",children:["Level ",a]})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsx)("button",{onClick:()=>{let e=!A;z(e),n.l.setEnabled(e),e&&n.l.playClick()},className:"text-white/80 hover:text-white transition-all p-2 hover:bg-white/10 rounded-lg active:scale-95",title:A?"Mute sounds":"Enable sounds",children:A?(0,i.jsx)(g.Z,{className:"w-5 h-5"}):(0,i.jsx)(p.Z,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-br from-red-500/20 to-red-600/10 px-3 py-1.5 rounded-full border border-red-400/30",children:[(0,i.jsx)(f.Z,{className:"w-5 h-5 text-red-400"}),(0,i.jsx)("span",{className:"text-white font-bold",children:N})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 px-3 py-1.5 rounded-full border border-yellow-400/30",children:[(0,i.jsx)(v.Z,{className:"w-5 h-5 text-yellow-300"}),(0,i.jsx)("span",{className:"text-white font-bold",children:k})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-white/15 to-white/5 rounded-xl p-3 border border-white/20",children:[(0,i.jsx)("div",{className:"text-white/70 text-xs font-medium mb-1",children:"Score"}),(0,i.jsx)("div",{className:"text-white font-black text-2xl",children:d.toLocaleString()}),(0,i.jsxs)("div",{className:"text-white/60 text-xs mt-0.5",children:["Goal: ",L.objectives[0].target.toLocaleString()]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-white/15 to-white/5 rounded-xl p-3 border border-white/20",children:[(0,i.jsx)("div",{className:"text-white/70 text-xs font-medium mb-1",children:"Moves"}),(0,i.jsx)("div",{className:"text-white font-black text-2xl",children:y}),(0,i.jsxs)("div",{className:"text-white/60 text-xs mt-0.5",children:["Max: ",L.maxMoves]})]})]}),(0,i.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3].map(e=>(0,i.jsx)(b.Z,{className:"w-8 h-8 transition-all ".concat(d>=L.starThresholds[e-1]?"fill-yellow-300 text-yellow-300 scale-110 drop-shadow-lg":"text-white/20")},e))})]}),(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center",children:"playing"===C?(0,i.jsx)(h,{rows:L.gridSize.rows,cols:L.gridSize.cols,onScoreChange:e=>{c(t=>{let l=t+e;return l>=L.objectives[0].target&&y>0&&setTimeout(()=>E("win"),500),l})},onMoveUsed:()=>{j(e=>{let t=e-1;return 0===t&&setTimeout(()=>{d>=L.objectives[0].target?E("win"):E("lose")},500),t})},isPaused:S}):"win"===C?(0,i.jsxs)("div",{className:"glass rounded-3xl p-8 max-w-sm w-full text-center card-elevated bg-gradient-to-br from-white/5 to-transparent",children:[(0,i.jsx)("div",{className:"text-7xl mb-4 animate-bounce drop-shadow-2xl",children:"\uD83C\uDF89"}),(0,i.jsx)("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-lg",children:"Level Complete!"}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-white/15 to-white/5 rounded-2xl p-5 mb-5 border border-white/20",children:[(0,i.jsx)("div",{className:"text-white/80 text-sm font-medium mb-1",children:"Base Score"}),(0,i.jsx)("div",{className:"text-white text-3xl font-black mb-4",children:d.toLocaleString()}),y>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-green-300 text-sm font-bold mb-1",children:[y," Moves Remaining!"]}),(0,i.jsxs)("div",{className:"text-green-300 text-2xl font-black mb-4",children:["+",Z().toLocaleString()]})]}),F(_())>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-yellow-300 text-sm font-bold mb-1",children:[_()," Star Bonus!"]}),(0,i.jsxs)("div",{className:"text-yellow-300 text-2xl font-black mb-4",children:["+",F(_()).toLocaleString()]})]}),(0,i.jsxs)("div",{className:"border-t border-white/30 pt-4",children:[(0,i.jsx)("div",{className:"text-white/80 text-sm font-medium mb-1",children:"Total Score"}),(0,i.jsx)("div",{className:"text-white text-4xl font-black drop-shadow-lg",children:(()=>{let e=_();return d+Z()+F(e)})().toLocaleString()})]})]}),(0,i.jsx)("div",{className:"flex justify-center gap-4 mb-8",children:[1,2,3].map(e=>(0,i.jsx)(b.Z,{className:"w-14 h-14 ".concat(_()>=e?"fill-yellow-300 text-yellow-300 animate-bounce drop-shadow-lg":"text-white/20"),style:{animationDelay:"".concat(100*e,"ms")}},e))}),(0,i.jsx)("button",{onClick:()=>{o(e=>e+1)},className:"w-full bg-gradient-to-r from-white to-white/95 text-red-600 py-4 rounded-2xl font-black text-xl hover:from-white/95 hover:to-white/90 active:scale-95 transition-all card-elevated shadow-xl",children:"Next Level"})]}):(0,i.jsxs)("div",{className:"glass rounded-3xl p-8 max-w-sm w-full text-center card-elevated bg-gradient-to-br from-white/5 to-transparent",children:[(0,i.jsx)("div",{className:"text-7xl mb-4 drop-shadow-2xl",children:"\uD83D\uDE22"}),(0,i.jsx)("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-lg",children:"Level Failed"}),(0,i.jsxs)("div",{className:"bg-white/10 rounded-xl p-4 mb-3",children:[(0,i.jsxs)("p",{className:"text-white/80 text-xl font-bold mb-1",children:["Score: ",d.toLocaleString()]}),(0,i.jsxs)("p",{className:"text-white/60 text-sm",children:["Goal: ",L.objectives[0].target.toLocaleString()," points"]})]}),N>0?(0,i.jsxs)("button",{onClick:()=>{j(L.maxMoves),c(0),E("playing"),M(e=>Math.max(0,e-1))},className:"w-full bg-gradient-to-r from-white to-white/95 text-red-600 py-4 rounded-2xl font-black text-xl hover:from-white/95 hover:to-white/90 active:scale-95 transition-all card-elevated shadow-xl",children:["Retry (",N," lives left)"]}):(0,i.jsxs)("div",{className:"text-white/80 bg-white/10 rounded-xl p-4",children:[(0,i.jsx)("p",{className:"mb-2 text-lg font-bold",children:"Out of lives!"}),(0,i.jsx)("p",{className:"text-sm text-white/60",children:"Lives regenerate every 30 minutes"})]})]})})]})}function j(){return(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-white/30 border-t-white"})}),children:(0,i.jsx)(y,{})})}},9232:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});let i=(0,l(9763).Z)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},8997:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});let i=(0,l(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},1706:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});let i=(0,l(9763).Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]])},8623:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});let i=(0,l(9763).Z)("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])}},function(e){e.O(0,[847,207,971,117,744],function(){return e(e.s=9015)}),_N_E=e.O()}]);