(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6066:function(e,t,i){Promise.resolve().then(i.bind(i,5590))},5590:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var a=i(7437),s=i(2265),n=i(9376),o=i(3145),l=i(8771),r=i(5954),c=i(6595),d=i(1239);function h(e){let{timeLeft:t,score:i,combo:s,dashCooldown:n,maxDashCooldown:o=2e3}=e,l=Math.min(100,s/10*100);return(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 p-4 safe-top z-10",children:(0,a.jsx)("div",{className:"max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"glass rounded-2xl p-4 card-elevated",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)(r.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{className:"text-2xl font-black text-white",children:[t,"s"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)(c.Z,{className:"w-4 h-4 text-yellow-300 fill-yellow-300"})}),(0,a.jsx)("div",{className:"text-2xl font-black text-white",children:i})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)(d.Z,{className:"w-4 h-4 text-yellow-300"})}),(0,a.jsxs)("div",{className:"text-2xl font-black text-white",children:["x",s]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-xs text-white/70",children:"Combo Meter"}),(0,a.jsxs)("span",{className:"text-xs text-white/70",children:[s,"/10"]})]}),(0,a.jsx)("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-red-500 transition-all duration-300",style:{width:"".concat(l,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-xs text-white/70",children:"Dash Ready"}),(0,a.jsx)("span",{className:"text-xs text-white/70",children:n>0?"".concat((n/1e3).toFixed(1),"s"):"Ready!"})]}),(0,a.jsx)("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-400 to-pink-500 transition-all duration-100",style:{width:"".concat(Math.max(0,100-n/o*100),"%")}})})]})]})]})})})}var u=i(2031);function m(e){let{onGameEnd:t,playerColor:i,triggerHaptic:o}=e,r=(0,s.useRef)(null),[c,d]=(0,s.useState)(60),[m,p]=(0,s.useState)(0),[x,f]=(0,s.useState)(1),[g,y]=(0,s.useState)(0);(0,n.useRouter)();let w=(0,s.useRef)({playerX:0,playerY:0,targetX:0,targetY:0,objects:[],score:0,combo:1,comboStreak:0,maxCombo:1,goodBites:0,goldenBites:0,hazardsHit:0,dashesUsed:0,lastDash:0,isDashing:!1,dashCooldown:3e3,stunned:!1,stunnedUntil:0,gameTime:0,lastSpawn:0,isMouseDown:!1,isMunching:!1,munchEndTime:0}),b=(0,s.useCallback)(()=>{let e=Date.now(),t=w.current;if(e-t.lastDash<t.dashCooldown||t.stunned)return;let i=t.targetX-t.playerX,a=t.targetY-t.playerY,s=Math.sqrt(i*i+a*a);s>10&&(t.playerX+=i/s*80,t.playerY+=a/s*80,t.playerX=Math.max(30,Math.min(t.playerX,345)),t.playerY=Math.max(30,Math.min(t.playerY,637)),t.isDashing=!0,t.dashesUsed++,t.lastDash=e,o("medium"),setTimeout(()=>{w.current.isDashing=!1},150))},[o]);return(0,s.useEffect)(()=>{let e;let a=r.current;if(!a)return;let s=a.getContext("2d");if(!s)return;a.width=375,a.height=667;let n=w.current;n.playerX=a.width/2,n.playerY=a.height/2,n.targetX=n.playerX,n.targetY=n.playerY;let c=new Image;c.src="/image copy copy.png";let h=!1;c.onload=()=>{h=!0},c.crossOrigin="anonymous";let m=Date.now(),x=e=>{e.preventDefault(),n.isMouseDown=!0;let t=a.getBoundingClientRect(),i="touches"in e?e.touches[0]:e;n.targetX=(i.clientX-t.left)*(a.width/t.width),n.targetY=(i.clientY-t.top)*(a.height/t.height)},g=e=>{if(!n.isMouseDown)return;e.preventDefault();let t=a.getBoundingClientRect(),i="touches"in e?e.touches[0]:e;n.targetX=(i.clientX-t.left)*(a.width/t.width),n.targetY=(i.clientY-t.top)*(a.height/t.height)},v=e=>{e.preventDefault(),n.isMouseDown=!1},j=e=>{e.preventDefault(),b()};a.addEventListener("pointerdown",x),a.addEventListener("pointermove",g),a.addEventListener("pointerup",v),a.addEventListener("click",j),a.addEventListener("touchstart",x,{passive:!1}),a.addEventListener("touchmove",g,{passive:!1}),a.addEventListener("touchend",v,{passive:!1});let C=()=>{let e,t,i,s,o,r,c,d;let h=n.gameTime,u=Math.random(),m=1+h/60*.5;if(u<.08){e="golden",t=20;let a=l.s_.goldenFoods[Math.floor(Math.random()*l.s_.goldenFoods.length)];i=a.emoji,s=a.color}else if(u<.3+h/120){e="hazard",t=18;let a=l.s_.hazards[Math.floor(Math.random()*Math.min(4,Math.floor(h/12)+1))];i=a.emoji,s=a.color}else{e="good",t=16;let a=l.s_.goodFoods[Math.floor(Math.random()*Math.min(6,Math.floor(h/8)+2))];i=a.emoji,s=a.color}let p=2.5*m,x=1.5*m;switch(Math.floor(4*Math.random())){case 0:o=Math.random()*a.width,r=-40,c=(Math.random()-.5)*x*1.5,d=p+Math.random()*x;break;case 1:o=a.width+40,r=Math.random()*a.height,c=-(p+Math.random()*x),d=(Math.random()-.5)*x*1.5;break;case 2:o=Math.random()*a.width,r=a.height+40,c=(Math.random()-.5)*x*1.5,d=-(p+Math.random()*x);break;default:o=-40,r=Math.random()*a.height,c=p+Math.random()*x,d=(Math.random()-.5)*x*1.5}"hazard"===e?(c*=1.2,d*=1.2):"golden"===e&&(c*=.8,d*=.8),n.objects.push({x:o,y:r,vx:c,vy:d,type:e,size:t,emoji:i,color:s})},k=()=>{let l=Date.now(),r=(l-m)/1e3,x=Math.max(0,60-r);if(n.gameTime=r,d(Math.ceil(x)),y(Math.max(0,n.dashCooldown-(l-n.lastDash))),x<=0){t({score:n.score,goodBites:n.goodBites,goldenBites:n.goldenBites,hazardsHit:n.hazardsHit,maxCombo:n.maxCombo,dashesUsed:n.dashesUsed,survivalTime:60});return}let g=Math.max(400,800-8*r);if(l-n.lastSpawn>g&&(C(),n.lastSpawn=l),n.stunned&&l>n.stunnedUntil&&(n.stunned=!1),n.isMunching&&l>n.munchEndTime&&(n.isMunching=!1),!n.stunned&&n.isMouseDown){let e=n.targetX-n.playerX,t=n.targetY-n.playerY,i=Math.sqrt(e*e+t*t);if(i>3){let a=Math.min(8,.15*i);n.playerX+=e/i*a,n.playerY+=t/i*a}}n.playerX=Math.max(30,Math.min(n.playerX,a.width-30)),n.playerY=Math.max(30,Math.min(n.playerY,a.height-30));let w=s.createLinearGradient(0,0,0,a.height);w.addColorStop(0,"#1e3a8a"),w.addColorStop(.5,"#7c3aed"),w.addColorStop(1,"#c026d3"),s.fillStyle=w,s.fillRect(0,0,a.width,a.height);for(let e=n.objects.length-1;e>=0;e--){let t=n.objects[e];if(t.x+=t.vx,t.y+=t.vy,t.x<-60||t.x>a.width+60||t.y<-60||t.y>a.height+60){n.objects.splice(e,1);continue}let i=t.x-n.playerX,r=t.y-n.playerY;if(Math.sqrt(i*i+r*r)<("golden"===t.type?35:"hazard"===t.type?30:32)&&!n.isDashing){n.objects.splice(e,1),"good"===t.type?(n.goodBites++,n.comboStreak++,n.comboStreak>=5&&(n.combo=Math.min(5,Math.floor(n.comboStreak/5)+1),n.maxCombo=Math.max(n.maxCombo,n.combo)),n.score+=10*n.combo,n.isMunching=!0,n.munchEndTime=l+150,u.l.playMunch(),o("light")):"golden"===t.type?(n.goldenBites++,n.score+=50*n.combo,n.isMunching=!0,n.munchEndTime=l+150,u.l.playMunch(),o("heavy")):"hazard"===t.type&&(n.hazardsHit++,n.comboStreak=0,n.combo=1,n.stunned=!0,n.stunnedUntil=l+500,u.l.playYuck(),o("heavy")),p(n.score),f(n.combo);continue}s.save(),"golden"===t.type&&(s.shadowColor=t.color,s.shadowBlur=12),s.font="".concat(2.2*t.size,"px Arial"),s.textAlign="center",s.textBaseline="middle",s.fillText(t.emoji,t.x,t.y),s.restore()}if(h){let e=(n.isDashing?63.24999999999999:55)*(n.isMunching?1.1:1);s.save(),s.imageSmoothingEnabled=!1,n.stunned?(s.globalAlpha=.5,s.filter="grayscale(100%) brightness(0.8)"):n.isDashing&&(s.shadowColor="#a855f7",s.shadowBlur=25),n.isMunching&&(s.shadowColor="#fbbf24",s.shadowBlur=15),s.drawImage(c,n.playerX-e/2,n.playerY-e/2,e,e),s.restore()}else s.beginPath(),s.arc(n.playerX,n.playerY,n.isDashing?30:25,0,2*Math.PI),s.fillStyle=n.stunned?"#gray":n.isDashing?"#a855f7":i,s.fill(),s.strokeStyle="white",s.lineWidth=3,s.stroke();e=requestAnimationFrame(k)};return k(),()=>{cancelAnimationFrame(e),a.removeEventListener("pointerdown",x),a.removeEventListener("pointermove",g),a.removeEventListener("pointerup",v),a.removeEventListener("click",j),a.removeEventListener("touchstart",x),a.removeEventListener("touchmove",g),a.removeEventListener("touchend",v)}},[t,i,o,b]),(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)(h,{timeLeft:c,score:m,combo:x,dashCooldown:g}),(0,a.jsx)("canvas",{ref:r,className:"w-full h-full touch-none",style:{touchAction:"none"}}),(0,a.jsx)("div",{className:"fixed bottom-24 left-0 right-0 text-center z-10 pointer-events-none",children:(0,a.jsx)("div",{className:"glass px-6 py-3 rounded-full inline-block card-elevated",children:(0,a.jsx)("p",{className:"text-white font-medium",children:"Hold to move • Tap to dash"})})})]})}var p=i(4681),x=i(9474),f=i(2023),g=i(3276),y=i(9637);function w(){let e=(0,n.useRouter)(),{state:t,cosmetics:i,updateScore:l,updateChallengeProgress:r,completeChallenge:c,challenges:h,triggerHaptic:u,mounted:w}=(0,p.g)(),[b,v]=(0,s.useState)("menu"),[j,C]=(0,s.useState)(null),[k,N]=(0,s.useState)({crumbs:0,challengeRewards:0}),S=p.w.find(e=>e.id===t.selectedSkin),M=(null==S?void 0:S.color)||"#3b82f6";return w?"results"===b&&j?(0,a.jsx)("div",{className:"min-h-screen p-4 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"max-w-md w-full glass rounded-3xl p-8 card-elevated",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)(x.Z,{className:"w-16 h-16 text-yellow-500 mx-auto mb-3"}),(0,a.jsx)("h2",{className:"text-5xl font-black text-white mb-2 animate-pop",children:j.score}),(0,a.jsx)("p",{className:"text-white/80 text-lg",children:"Final Score"}),j.score>t.bestScore&&(0,a.jsx)("p",{className:"text-base font-bold text-yellow-300 mt-2",children:"\uD83C\uDF89 NEW BEST SCORE!"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white/20 rounded-2xl p-4 text-center",children:[(0,a.jsx)(f.Z,{className:"w-6 h-6 text-yellow-300 mx-auto mb-2"}),(0,a.jsxs)("div",{className:"text-2xl font-black text-white",children:["+",k.crumbs+k.challengeRewards]}),(0,a.jsx)("div",{className:"text-sm text-white/70",children:"Crumbs"})]}),(0,a.jsxs)("div",{className:"bg-white/20 rounded-2xl p-4 text-center",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-yellow-300 mx-auto mb-2"}),(0,a.jsxs)("div",{className:"text-2xl font-black text-white",children:["x",j.maxCombo]}),(0,a.jsx)("div",{className:"text-sm text-white/70",children:"Max Combo"})]})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-white/80",children:"Good Bites"}),(0,a.jsx)("span",{className:"font-bold text-white text-lg",children:j.goodBites})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-white/80",children:"Golden Bites"}),(0,a.jsx)("span",{className:"font-bold text-white text-lg",children:j.goldenBites})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-white/80",children:"Hazards Hit"}),(0,a.jsx)("span",{className:"font-bold text-white text-lg",children:j.hazardsHit})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-white/80",children:"Dashes Used"}),(0,a.jsx)("span",{className:"font-bold text-white text-lg",children:j.dashesUsed})]})]}),k.challengeRewards>0&&(0,a.jsx)("div",{className:"bg-white/20 border-2 border-yellow-300 rounded-2xl p-4 mb-6",children:(0,a.jsxs)("p",{className:"text-base font-bold text-yellow-300 text-center",children:["\uD83C\uDFC6 Challenge bonus: +",k.challengeRewards," Crumbs!"]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>{v("playing"),C(null)},className:"w-full bg-white text-red-600 font-black text-xl py-5 rounded-2xl hover:bg-white/95 active:scale-95 transition-all flex items-center justify-center gap-2 card-elevated",children:[(0,a.jsx)(g.Z,{className:"w-6 h-6"}),"Play Again"]}),(0,a.jsxs)("button",{onClick:()=>e.push("/"),className:"w-full bg-white/20 text-white font-bold text-base py-4 rounded-2xl hover:bg-white/25 active:scale-95 transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5"}),"Home"]})]})]})}):"playing"===b?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(m,{onGameEnd:e=>{console.log("[Analytics] run_started",{score:e.score});let{crumbsEarned:i}=l(e.score),a=0;h.forEach(e=>{if(e.completed&&!t.completedChallenges.includes(e.id)){let t=c(e.id);a+=t}}),h.forEach(t=>{switch(t.id.split("_")[0]){case"score":e.score>=t.target&&r(t.id,e.score);break;case"collect":r(t.id,e.goodBites);break;case"combo":r(t.id,e.maxCombo);break;case"golden":r(t.id,e.goldenBites);break;case"perfect":0===e.hazardsHit&&r(t.id,1);break;case"dash":r(t.id,e.dashesUsed);break;case"play":r(t.id,1);break;case"survive":r(t.id,Math.floor(e.survivalTime))}}),C(e),N({crumbs:i,challengeRewards:a}),v("results")},playerColor:M,triggerHaptic:u})}):(0,a.jsx)("div",{className:"min-h-screen p-6 flex items-center justify-center safe-top",children:(0,a.jsxs)("div",{className:"max-w-md w-full glass rounded-3xl p-8 card-elevated text-center",children:[(0,a.jsx)("div",{className:"mb-4 flex justify-center",children:(0,a.jsx)("div",{className:"relative w-24 h-24",children:(0,a.jsx)(o.default,{src:"/image copy.png",alt:"Santa Pockets the Raccoon",fill:!0,className:"object-contain drop-shadow-2xl"})})}),(0,a.jsx)("h1",{className:"text-4xl font-black text-white mb-2",children:"Arcade Mode"}),(0,a.jsx)("p",{className:"text-white/80 text-lg mb-2",children:"60 Second Sprint"}),(0,a.jsx)("p",{className:"text-white/60 text-sm mb-8",children:"Help Pockets collect treats!"}),(0,a.jsxs)("div",{className:"bg-white/10 rounded-2xl p-6 mb-8",children:[(0,a.jsx)("h2",{className:"font-bold text-white text-lg mb-4",children:"How to Play:"}),(0,a.jsxs)("ul",{className:"text-left text-base text-white/90 space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDFAF"}),(0,a.jsx)("span",{children:"Hold screen to move Pockets"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{children:"⚡"}),(0,a.jsx)("span",{children:"Tap to dash through obstacles"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDF70"}),(0,a.jsx)("span",{children:"Collect desserts for points"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{children:"⭐"}),(0,a.jsx)("span",{children:"Grab golden stars for bonus points"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDFCF"}),(0,a.jsx)("span",{children:"Avoid non-food items like bats & socks"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDD25"}),(0,a.jsx)("span",{children:"Build combos for multipliers"})]})]})]}),(0,a.jsx)("button",{onClick:()=>{v("playing"),console.log("[Analytics] run_started")},className:"w-full bg-white text-red-600 font-black text-2xl py-6 rounded-2xl hover:bg-white/95 active:scale-95 transition-all mb-4 card-elevated",children:"START GAME"}),(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"text-white/80 hover:text-white font-medium text-base",children:"Back to Home"})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-white/30 border-t-white"})})}},4681:function(e,t,i){"use strict";i.d(t,{g:function(){return r},w:function(){return o}});var a=i(2265);let s="feastfun_game_state",n={bestScore:0,crumbs:0,ownedCosmetics:["default_skin","default_trail"],selectedSkin:"default_skin",selectedTrail:"default_trail",selectedEmote:"",completedChallenges:[],dailyStreak:0,lastPlayedDate:"",soundEnabled:!0,hapticsEnabled:!0,totalRuns:0,totalScore:0},o=[{id:"default_skin",name:"Classic",type:"skin",cost:0,color:"#3b82f6",description:"The OG"},{id:"fire_skin",name:"Firecracker",type:"skin",cost:500,color:"#ef4444",description:"Blazing hot"},{id:"ice_skin",name:"Frosty",type:"skin",cost:500,color:"#06b6d4",description:"Cool as ice"},{id:"gold_skin",name:"Golden",type:"skin",cost:1e3,color:"#fbbf24",description:"For winners"},{id:"neon_skin",name:"Neon",type:"skin",cost:1500,color:"#a855f7",description:"Glow up"},{id:"default_trail",name:"Basic Trail",type:"trail",cost:0,description:"Standard trail"},{id:"star_trail",name:"Starlight",type:"trail",cost:300,description:"Leave stars behind"},{id:"rainbow_trail",name:"Rainbow",type:"trail",cost:800,description:"Colorful path"},{id:"wave_emote",name:"Wave",type:"emote",cost:200,description:"\uD83D\uDC4B"},{id:"fire_emote",name:"On Fire",type:"emote",cost:400,description:"\uD83D\uDD25"}],l=[{id:"score_1000",name:"Score 1000",description:"Score 1000+ points in a run",type:"daily",target:1e3,reward:100},{id:"score_2000",name:"Score 2000",description:"Score 2000+ points in a run",type:"daily",target:2e3,reward:200},{id:"collect_20",name:"Bite Collector",description:"Collect 20 Good Bites in one run",type:"daily",target:20,reward:150},{id:"combo_5",name:"Combo Master",description:"Reach a 5x combo multiplier",type:"daily",target:5,reward:100},{id:"golden_3",name:"Golden Hunter",description:"Collect 3 Golden Bites in one run",type:"daily",target:3,reward:200},{id:"perfect_run",name:"Perfect Run",description:"Complete a run without hitting hazards",type:"daily",target:1,reward:300},{id:"dash_10",name:"Dash Master",description:"Use dash 10 times in one run",type:"daily",target:10,reward:100},{id:"play_3",name:"Daily Grind",description:"Complete 3 runs today",type:"daily",target:3,reward:150},{id:"survive_45",name:"Survivor",description:"Survive for 45+ seconds",type:"daily",target:45,reward:100},{id:"speed_demon",name:"Speed Demon",description:"Collect 30 bites in 30 seconds",type:"daily",target:30,reward:250},{id:"week_score_10k",name:"Weekly Warrior",description:"Score 10,000+ total points this week",type:"weekly",target:1e4,reward:500},{id:"week_runs_15",name:"Dedication",description:"Complete 15 runs this week",type:"weekly",target:15,reward:400},{id:"week_streak_5",name:"Streak Master",description:"Maintain a 5-day streak",type:"weekly",target:5,reward:600},{id:"week_golden_15",name:"Golden Week",description:"Collect 15 Golden Bites this week",type:"weekly",target:15,reward:700},{id:"week_perfect_3",name:"Perfectionist",description:"Complete 3 perfect runs this week",type:"weekly",target:3,reward:800}];function r(){let[e,t]=(0,a.useState)(n),[i,r]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{{let e=localStorage.getItem(s);e&&t(JSON.parse(e)),d(!0),h()}},[]),(0,a.useEffect)(()=>{c&&localStorage.setItem(s,JSON.stringify(e))},[e,c]);let h=()=>{let e=new Date().toISOString().split("T")[0],t=new Date().getDay(),i=new Date;i.setDate(i.getDate()+(0===t?-6:1-t));let a=i.toISOString().split("T")[0],s=l.filter(e=>"daily"===e.type),n=l.filter(e=>"weekly"===e.type),o=parseInt(e.replace(/-/g,""))%s.length;r([...[s[o%s.length],s[(o+1)%s.length],s[(o+2)%s.length]].map(t=>({...t,id:"".concat(t.id,"_").concat(e),type:"daily",progress:0,completed:!1})),...n.map(e=>({...e,id:"".concat(e.id,"_").concat(a),type:"weekly",progress:0,completed:!1}))])};return{state:e,challenges:i,cosmetics:o,updateScore:i=>{let a=Math.floor(i/200),s=new Date().toISOString().split("T")[0],n=e.dailyStreak;if(e.lastPlayedDate!==s){let t=new Date;t.setDate(t.getDate()-1);let i=t.toISOString().split("T")[0];n=e.lastPlayedDate===i?e.dailyStreak+1:1}return console.log("[Analytics] run_ended",{score:i,crumbsEarned:a,streak:n}),t(e=>({...e,bestScore:Math.max(e.bestScore,i),crumbs:e.crumbs+a,dailyStreak:n,lastPlayedDate:s,totalRuns:e.totalRuns+1,totalScore:e.totalScore+i})),{crumbsEarned:a,newStreak:n}},purchaseCosmetic:i=>{let a=o.find(e=>e.id===i);return!(!a||e.crumbs<a.cost||e.ownedCosmetics.includes(i))&&(console.log("[Analytics] cosmetic_purchased",{cosmeticId:i,cost:a.cost}),t(e=>({...e,crumbs:e.crumbs-a.cost,ownedCosmetics:[...e.ownedCosmetics,i]})),!0)},selectCosmetic:(i,a)=>{e.ownedCosmetics.includes(i)&&("skin"===a?t(e=>({...e,selectedSkin:i})):"trail"===a?t(e=>({...e,selectedTrail:i})):"emote"===a&&t(e=>({...e,selectedEmote:i})))},completeChallenge:a=>{let s=i.find(e=>e.id===a);return!s||e.completedChallenges.includes(a)?0:(console.log("[Analytics] challenge_completed",{challengeId:a,reward:s.reward}),t(e=>({...e,crumbs:e.crumbs+s.reward,completedChallenges:[...e.completedChallenges,a]})),s.reward)},updateChallengeProgress:(t,i)=>{r(a=>a.map(a=>a.id!==t||e.completedChallenges.includes(t)?a:{...a,progress:Math.max(a.progress,i),completed:i>=a.target}))},toggleSound:()=>{t(e=>({...e,soundEnabled:!e.soundEnabled}))},toggleHaptics:()=>{t(e=>({...e,hapticsEnabled:!e.hapticsEnabled}))},resetData:()=>{console.log("[Analytics] data_reset"),t(n),r([]),h()},triggerHaptic:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";e.hapticsEnabled&&"vibrate"in navigator&&navigator.vibrate({light:10,medium:20,heavy:50}[t])},mounted:c}}},8771:function(e,t,i){"use strict";i.d(t,{Kb:function(){return n},s_:function(){return a}});let a={goodFoods:[{emoji:"\uD83C\uDF6C",color:"#22c55e",name:"Candy Cane",points:10},{emoji:"\uD83C\uDF6A",color:"#fbbf24",name:"Gingerbread",points:10},{emoji:"\uD83C\uDF82",color:"#ec4899",name:"Cake",points:10},{emoji:"\uD83C\uDF69",color:"#f97316",name:"Donut",points:10},{emoji:"\uD83E\uDDC1",color:"#a855f7",name:"Cupcake",points:10},{emoji:"\uD83C\uDF70",color:"#06b6d4",name:"Pie",points:10}],goldenFoods:[{emoji:"⭐",color:"#fbbf24",name:"Golden Star",points:50},{emoji:"\uD83C\uDF1F",color:"#facc15",name:"Shining Star",points:50}],hazards:[{emoji:"\uD83C\uDFCF",color:"#ef4444",name:"Baseball Bat",points:0},{emoji:"\uD83E\uDDE6",color:"#8b5cf6",name:"Smelly Sock",points:0},{emoji:"\uD83E\uDEA8",color:"#78716c",name:"Rock",points:0},{emoji:"\uD83D\uDD28",color:"#dc2626",name:"Hammer",points:0}]},s=[{level:1,gridSize:{rows:8,cols:7},maxMoves:25,objectives:[{type:"score",target:1e3,description:"Score 1,000 points"}],starThresholds:[1e3,2e3,3500],difficulty:"easy"},{level:2,gridSize:{rows:8,cols:7},maxMoves:22,objectives:[{type:"score",target:1500,description:"Score 1,500 points"}],starThresholds:[1500,2500,4e3],difficulty:"easy"},{level:3,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:2e3,description:"Score 2,000 points"}],starThresholds:[2e3,3500,5500],difficulty:"easy"},{level:4,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:2500,description:"Score 2,500 points"}],starThresholds:[2500,4e3,6500],difficulty:"easy"},{level:5,gridSize:{rows:8,cols:7},maxMoves:20,objectives:[{type:"score",target:3e3,description:"Score 3,000 points"}],starThresholds:[3e3,5e3,8e3],difficulty:"easy"},...Array.from({length:10},(e,t)=>{let i=t+6,a=4e3+500*i;return{level:i,gridSize:{rows:9,cols:7},maxMoves:20,objectives:[{type:"score",target:a,description:"Score ".concat(a.toLocaleString()," points")}],starThresholds:[a,Math.floor(1.5*a),Math.floor(2.2*a)],difficulty:"medium"}}),...Array.from({length:15},(e,t)=>{let i=t+16,a=1e4+700*i;return{level:i,gridSize:{rows:9,cols:7},maxMoves:Math.max(12,18-Math.floor(t/5)),objectives:[{type:"score",target:a,description:"Score ".concat(a.toLocaleString()," points")}],starThresholds:[a,Math.floor(1.4*a),Math.floor(2*a)],difficulty:"hard"}})];function n(e){return s.find(t=>t.level===e)||s[0]}},2031:function(e,t,i){"use strict";i.d(t,{l:function(){return a}});let a=new class{async initialize(){if(!this.initialized&&this.audioContext){if("suspended"===this.audioContext.state)try{await this.audioContext.resume(),this.initialized=!0,console.log("Audio initialized")}catch(e){console.warn("Failed to initialize audio:",e)}else this.initialized=!0}}setEnabled(e){this.enabled=e,e&&!this.initialized&&this.initialize()}getEnabled(){return this.enabled}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}async playTone(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sine",a=arguments.length>3?arguments[3]:void 0;if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let s=this.audioContext.createOscillator(),n=this.audioContext.createGain();s.connect(n),n.connect(this.audioContext.destination),s.frequency.value=e,s.type=i;let o=(null!=a?a:this.volume)*.5;n.gain.setValueAtTime(o,this.audioContext.currentTime),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+t)}async playMatch(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain();t.connect(i),i.connect(this.audioContext.destination),t.type="sine",t.frequency.setValueAtTime(400,e),t.frequency.exponentialRampToValueAtTime(600,e+.1),i.gain.setValueAtTime(.3*this.volume,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),t.start(e),t.stop(e+.15)}async playChomp(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;for(let t=0;t<3;t++){let i=this.audioContext.createOscillator(),a=this.audioContext.createGain(),s=this.audioContext.createBiquadFilter();i.connect(s),s.connect(a),a.connect(this.audioContext.destination),i.type="square",s.type="lowpass",s.frequency.value=800;let n=e+.08*t;i.frequency.setValueAtTime(200-30*t,n),i.frequency.exponentialRampToValueAtTime(100,n+.06),a.gain.setValueAtTime(.4*this.volume,n),a.gain.exponentialRampToValueAtTime(.01,n+.06),i.start(n),i.stop(n+.06)}}async playWhoops(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain();t.connect(i),i.connect(this.audioContext.destination),t.type="sawtooth",t.frequency.setValueAtTime(300,e),t.frequency.exponentialRampToValueAtTime(150,e+.2),i.gain.setValueAtTime(.3*this.volume,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),t.start(e),t.stop(e+.2)}async playCombo(e){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let t=400+100*e,i=this.audioContext.currentTime;for(let a=0;a<e;a++){let e=this.audioContext.createOscillator(),s=this.audioContext.createGain();e.connect(s),s.connect(this.audioContext.destination),e.type="sine";let n=i+.05*a;e.frequency.setValueAtTime(t+50*a,n),s.gain.setValueAtTime(.25*this.volume,n),s.gain.exponentialRampToValueAtTime(.01,n+.1),e.start(n),e.stop(n+.1)}}async playSuccess(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;[523.25,659.25,783.99,1046.5].forEach((t,i)=>{let a=this.audioContext.createOscillator(),s=this.audioContext.createGain();a.connect(s),s.connect(this.audioContext.destination),a.type="sine";let n=e+.1*i;a.frequency.value=t,s.gain.setValueAtTime(.3*this.volume,n),s.gain.exponentialRampToValueAtTime(.01,n+.2),a.start(n),a.stop(n+.2)})}playClick(){this.playTone(600,.05,"sine",.2*this.volume)}async playMunch(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter();t.connect(a),a.connect(i),i.connect(this.audioContext.destination),t.type="square",a.type="lowpass",a.frequency.value=1200,t.frequency.setValueAtTime(350,e),t.frequency.exponentialRampToValueAtTime(250,e+.08),i.gain.setValueAtTime(.35*this.volume,e),i.gain.exponentialRampToValueAtTime(.01,e+.08),t.start(e),t.stop(e+.08)}async playYuck(){if(!this.enabled||!this.audioContext||(await this.initialize(),!this.initialized))return;let e=this.audioContext.currentTime;for(let t=0;t<2;t++){let i=this.audioContext.createOscillator(),a=this.audioContext.createGain(),s=this.audioContext.createBiquadFilter();i.connect(s),s.connect(a),a.connect(this.audioContext.destination),i.type="sawtooth",s.type="lowpass",s.frequency.value=600;let n=e+.12*t;i.frequency.setValueAtTime(180-20*t,n),i.frequency.exponentialRampToValueAtTime(120,n+.1),a.gain.setValueAtTime(.4*this.volume,n),a.gain.exponentialRampToValueAtTime(.01,n+.1),i.start(n),i.stop(n+.1)}}constructor(){this.audioContext=null,this.enabled=!0,this.volume=.3,this.initialized=!1;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Web Audio API not supported")}}}},9637:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},3276:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9763).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},2023:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9763).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},5954:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9763).Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},1239:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9763).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},9376:function(e,t,i){"use strict";var a=i(5475);i.o(a,"usePathname")&&i.d(t,{usePathname:function(){return a.usePathname}}),i.o(a,"useRouter")&&i.d(t,{useRouter:function(){return a.useRouter}}),i.o(a,"useSearchParams")&&i.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[211,971,117,744],function(){return e(e.s=6066)}),_N_E=e.O()}]);