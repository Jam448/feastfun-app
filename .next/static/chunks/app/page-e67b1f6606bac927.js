(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6231:function(e,t,s){Promise.resolve().then(s.bind(s,7828))},7828:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(7437),i=s(4681),l=s(2265),r=(s(2141),s(3145));function n(e){let{size:t="medium",animate:s=!0,showStats:i=!1}=e;return(0,a.jsx)("div",{className:"relative ".concat({small:"w-16 h-16",medium:"w-24 h-24",large:"w-32 h-32"}[t]),children:(0,a.jsx)("div",{className:s?"animate-bounce":"",children:(0,a.jsx)(r.default,{src:"/santa_pockets.png",alt:"Pockets the Raccoon",fill:!0,className:"object-contain drop-shadow-2xl",priority:!0})})})}var o=s(6281),c=s(9763);let d=(0,c.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),m=(0,c.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var h=s(9090),u=s(9376);function p(){let{user:e,signOut:t,loading:s}=(0,o.a)(),i=(0,u.useRouter)();return s?(0,a.jsx)("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-md px-4 py-2 rounded-full",children:(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}):e?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-md px-4 py-2 rounded-full text-white font-semibold flex items-center gap-2",children:[(0,a.jsx)(d,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"max-w-[150px] truncate",children:e.email})]}),(0,a.jsxs)("button",{onClick:()=>t(),className:"bg-white/20 backdrop-blur-md hover:bg-white/30 px-4 py-2 rounded-full text-white font-semibold flex items-center gap-2 transition-all transform hover:scale-105",children:[(0,a.jsx)(m,{className:"w-4 h-4"}),"Sign Out"]})]}):(0,a.jsxs)("button",{onClick:()=>i.push("/auth/login"),className:"bg-white hover:bg-white/90 px-6 py-3 rounded-full text-red-600 font-bold flex items-center gap-2 shadow-lg transform hover:scale-105 active:scale-95 transition-all",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"Sign In"]})}var x=s(7648),f=s(6595),g=s(2023);let y=(0,c.Z)("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);var w=s(1239),b=s(3276),v=s(9474);function j(){let{state:e,isLoaded:t}=(0,i.g)(),{totalStars:s,crumbs:r,highestUnlockedLevel:o,loading:c}=function(e){let[t,s]=(0,l.useState)(0),[a,i]=(0,l.useState)(0),[r,n]=(0,l.useState)(1),[o,c]=(0,l.useState)(!0),d=async()=>{s(0),i(0),n(1),c(!1)};return(0,l.useEffect)(()=>{let e=!1;return(async()=>{e||await d()})(),()=>{e=!0}},[void 0]),{totalStars:t,crumbs:a,highestUnlockedLevel:r,loading:o,refresh:d}}();return!t||c?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-white/30 border-t-white"})}):(0,a.jsx)("div",{className:"min-h-screen p-6 safe-top pb-24",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)(p,{})}),(0,a.jsxs)("div",{className:"glass rounded-3xl p-8 card-elevated text-center relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("div",{className:"mb-6 flex justify-center",children:(0,a.jsx)(n,{size:"medium",animate:!0,showStats:!1})}),(0,a.jsx)("h1",{className:"text-5xl font-black text-white mb-2 tracking-tight",children:"FeastFun"}),(0,a.jsx)("p",{className:"text-xl text-white/90 font-medium mb-2",children:"Christmas Edition"}),(0,a.jsx)("p",{className:"text-sm text-white/70 mb-4",children:"featuring Pockets the Raccoon!"}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3 justify-center",children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full backdrop-blur-sm",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 text-yellow-300 fill-yellow-300"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[s," Stars"]})]}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full backdrop-blur-sm",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 text-yellow-300"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[r," Crumbs"]})]})]})]})]}),(0,a.jsx)(x.default,{href:"/feast",className:"w-full",children:(0,a.jsxs)("button",{className:"group w-full bg-white hover:bg-white/95 text-red-600 font-black text-lg py-8 rounded-2xl card-elevated transition-all duration-200 active:scale-95 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-50 to-transparent opacity-50"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)(y,{className:"w-10 h-10 mx-auto mb-2 group-hover:scale-110 transition-transform"}),(0,a.jsx)("div",{children:"Level Map"}),(0,a.jsx)("div",{className:"text-xs font-normal text-red-500 mt-1",children:"30 Festive Levels"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(x.default,{href:"/arcade",children:(0,a.jsxs)("button",{className:"group w-full bg-white/10 hover:bg-white/15 text-white font-black text-lg py-8 rounded-2xl card-elevated transition-all duration-200 active:scale-95 border-2 border-white/20 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-50"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)(w.Z,{className:"w-10 h-10 mx-auto mb-2 group-hover:scale-110 transition-transform"}),(0,a.jsx)("div",{children:"Arcade"}),(0,a.jsx)("div",{className:"text-xs font-normal text-white/70 mt-1",children:"Bonus Mode"})]})]})}),(0,a.jsx)(x.default,{href:"/play",children:(0,a.jsxs)("button",{className:"group w-full bg-white/10 hover:bg-white/15 text-white font-black text-lg py-8 rounded-2xl card-elevated transition-all duration-200 active:scale-95 border-2 border-white/20 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-50"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)(b.Z,{className:"w-10 h-10 mx-auto mb-2 group-hover:scale-110 transition-transform"}),(0,a.jsx)("div",{children:"Play"}),(0,a.jsx)("div",{className:"text-xs font-normal text-white/70 mt-1",children:"Runner"})]})]})})]}),e.totalRuns>0&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 card-elevated",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 text-yellow-300"}),"Your Progress"]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-black text-white",children:e.bestScore}),(0,a.jsx)("div",{className:"text-sm text-white/70 mt-1",children:"Best Score"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-black text-white",children:e.crumbs}),(0,a.jsx)("div",{className:"text-sm text-white/70 mt-1",children:"Crumbs"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-black text-white",children:e.dailyStreak}),(0,a.jsx)("div",{className:"text-sm text-white/70 mt-1",children:"Streak"})]})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 card-elevated space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-white text-base mb-2",children:"\uD83C\uDFAE Match-3 Mode"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-white/80",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-white",children:"•"}),(0,a.jsx)("span",{children:"Match 3 or more treats to score points"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-white",children:"•"}),(0,a.jsx)("span",{children:"Earn up to 3 stars per level"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-white",children:"•"}),(0,a.jsx)("span",{children:"Complete objectives within move limit"})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-white/20 pt-4",children:[(0,a.jsx)("h3",{className:"font-bold text-white text-base mb-2",children:"⚡ Arcade Mode"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-white/80",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-white",children:"•"}),(0,a.jsx)("span",{children:"Collect yummy desserts for points"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-white",children:"•"}),(0,a.jsx)("span",{children:"Avoid non-food items like bats and socks"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-white",children:"•"}),(0,a.jsx)("span",{children:"Use dash to phase through obstacles"})]})]})]})]})]})})}},6281:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return n},a:function(){return o}});var a=s(7437),i=s(2265),l=s(2141);let r=(0,i.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,i.useState)(null),[o,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{l.O.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;n(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),c(!1)});let{data:{subscription:e}}=l.O.auth.onAuthStateChange((e,t)=>{var s;n(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)});return()=>e.unsubscribe()},[]);let d=async(e,t)=>{let{error:s}=await l.O.auth.signInWithPassword({email:e,password:t});return{error:s}},m=async(e,t)=>{let{error:s}=await l.O.auth.signUp({email:e,password:t,options:{emailRedirectTo:window.location.origin}});return{error:s}},h=async()=>{await l.O.auth.signOut()};return(0,a.jsx)(r.Provider,{value:{user:s,loading:o,signIn:d,signUp:m,signOut:h},children:t})}function o(){let e=(0,i.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4681:function(e,t,s){"use strict";s.d(t,{g:function(){return o},w:function(){return r}});var a=s(2265);let i="feastfun_game_state",l={bestScore:0,crumbs:0,ownedCosmetics:["default_skin","default_trail"],selectedSkin:"default_skin",selectedTrail:"default_trail",selectedEmote:"",completedChallenges:[],dailyStreak:0,lastPlayedDate:"",soundEnabled:!0,hapticsEnabled:!0,totalRuns:0,totalScore:0},r=[{id:"default_skin",name:"Classic",type:"skin",cost:0,color:"#3b82f6",description:"The OG"},{id:"fire_skin",name:"Firecracker",type:"skin",cost:500,color:"#ef4444",description:"Blazing hot"},{id:"ice_skin",name:"Frosty",type:"skin",cost:500,color:"#06b6d4",description:"Cool as ice"},{id:"gold_skin",name:"Golden",type:"skin",cost:1e3,color:"#fbbf24",description:"For winners"},{id:"neon_skin",name:"Neon",type:"skin",cost:1500,color:"#a855f7",description:"Glow up"},{id:"default_trail",name:"Basic Trail",type:"trail",cost:0,description:"Standard trail"},{id:"star_trail",name:"Starlight",type:"trail",cost:300,description:"Leave stars behind"},{id:"rainbow_trail",name:"Rainbow",type:"trail",cost:800,description:"Colorful path"},{id:"wave_emote",name:"Wave",type:"emote",cost:200,description:"\uD83D\uDC4B"},{id:"fire_emote",name:"On Fire",type:"emote",cost:400,description:"\uD83D\uDD25"}],n=[{id:"score_1000",name:"Score 1000",description:"Score 1000+ points in a run",type:"daily",target:1e3,reward:100},{id:"score_2000",name:"Score 2000",description:"Score 2000+ points in a run",type:"daily",target:2e3,reward:200},{id:"collect_20",name:"Bite Collector",description:"Collect 20 Good Bites in one run",type:"daily",target:20,reward:150},{id:"combo_5",name:"Combo Master",description:"Reach a 5x combo multiplier",type:"daily",target:5,reward:100},{id:"golden_3",name:"Golden Hunter",description:"Collect 3 Golden Bites in one run",type:"daily",target:3,reward:200},{id:"perfect_run",name:"Perfect Run",description:"Complete a run without hitting hazards",type:"daily",target:1,reward:300},{id:"dash_10",name:"Dash Master",description:"Use dash 10 times in one run",type:"daily",target:10,reward:100},{id:"play_3",name:"Daily Grind",description:"Complete 3 runs today",type:"daily",target:3,reward:150},{id:"survive_45",name:"Survivor",description:"Survive for 45+ seconds",type:"daily",target:45,reward:100},{id:"speed_demon",name:"Speed Demon",description:"Collect 30 bites in 30 seconds",type:"daily",target:30,reward:250},{id:"week_score_10k",name:"Weekly Warrior",description:"Score 10,000+ total points this week",type:"weekly",target:1e4,reward:500},{id:"week_runs_15",name:"Dedication",description:"Complete 15 runs this week",type:"weekly",target:15,reward:400},{id:"week_streak_5",name:"Streak Master",description:"Maintain a 5-day streak",type:"weekly",target:5,reward:600},{id:"week_golden_15",name:"Golden Week",description:"Collect 15 Golden Bites this week",type:"weekly",target:15,reward:700},{id:"week_perfect_3",name:"Perfectionist",description:"Complete 3 perfect runs this week",type:"weekly",target:3,reward:800}];function o(){let[e,t]=(0,a.useState)(l),[s,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),m=()=>{let e=new Date().toISOString().split("T")[0],t=new Date().getDay(),s=new Date;s.setDate(s.getDate()+(0===t?-6:1-t));let a=s.toISOString().split("T")[0],i=n.filter(e=>"daily"===e.type),l=n.filter(e=>"weekly"===e.type),r=parseInt(e.replace(/-/g,""))%i.length;o([...[i[r%i.length],i[(r+1)%i.length],i[(r+2)%i.length]].map(t=>({...t,id:"".concat(t.id,"_").concat(e),type:"daily",progress:0,completed:!1})),...l.map(e=>({...e,id:"".concat(e.id,"_").concat(a),type:"weekly",progress:0,completed:!1}))])};return(0,a.useEffect)(()=>{(()=>{console.log("[GameStore] Initializing...");try{{let e=localStorage.getItem(i);e&&(t(JSON.parse(e)),console.log("[GameStore] State loaded from localStorage"))}}catch(e){console.error("Failed to load game state:",e)}m(),console.log("[GameStore] Loaded successfully"),d(!0)})()},[]),(0,a.useEffect)(()=>{if(c)try{localStorage.setItem(i,JSON.stringify(e))}catch(e){console.error("Failed to save game state:",e)}},[e,c]),{state:e,challenges:s,cosmetics:r,updateScore:s=>{let a=Math.floor(s/200),i=new Date().toISOString().split("T")[0],l=e.dailyStreak;if(e.lastPlayedDate!==i){let t=new Date;t.setDate(t.getDate()-1);let s=t.toISOString().split("T")[0];l=e.lastPlayedDate===s?e.dailyStreak+1:1}return console.log("[Analytics] run_ended",{score:s,crumbsEarned:a,streak:l}),t(e=>({...e,bestScore:Math.max(e.bestScore,s),crumbs:e.crumbs+a,dailyStreak:l,lastPlayedDate:i,totalRuns:e.totalRuns+1,totalScore:e.totalScore+s})),{crumbsEarned:a,newStreak:l}},purchaseCosmetic:s=>{let a=r.find(e=>e.id===s);return!(!a||e.crumbs<a.cost||e.ownedCosmetics.includes(s))&&(console.log("[Analytics] cosmetic_purchased",{cosmeticId:s,cost:a.cost}),t(e=>({...e,crumbs:e.crumbs-a.cost,ownedCosmetics:[...e.ownedCosmetics,s]})),!0)},selectCosmetic:(s,a)=>{e.ownedCosmetics.includes(s)&&("skin"===a?t(e=>({...e,selectedSkin:s})):"trail"===a?t(e=>({...e,selectedTrail:s})):"emote"===a&&t(e=>({...e,selectedEmote:s})))},completeChallenge:a=>{let i=s.find(e=>e.id===a);return!i||e.completedChallenges.includes(a)?0:(console.log("[Analytics] challenge_completed",{challengeId:a,reward:i.reward}),t(e=>({...e,crumbs:e.crumbs+i.reward,completedChallenges:[...e.completedChallenges,a]})),i.reward)},updateChallengeProgress:(t,s)=>{o(a=>a.map(a=>a.id!==t||e.completedChallenges.includes(t)?a:{...a,progress:Math.max(a.progress,s),completed:s>=a.target}))},toggleSound:()=>{t(e=>({...e,soundEnabled:!e.soundEnabled}))},toggleHaptics:()=>{t(e=>({...e,hapticsEnabled:!e.hapticsEnabled}))},resetData:()=>{console.log("[Analytics] data_reset"),t(l),o([]),m()},triggerHaptic:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";e.hapticsEnabled&&"vibrate"in navigator&&navigator.vibrate({light:10,medium:20,heavy:50}[t])},isLoaded:c}}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(3525).eI)("https://kbzisagkdedjwzgtrpig.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiemlzYWdrZGVkand6Z3RycGlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NDk3MjMsImV4cCI6MjA4MDIyNTcyM30.q8xu3_y3a7ASucea21ZyHu4fPD0nKzThSgb1j0dpoBs")},9090:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},3276:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},2023:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},6595:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9474:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},1239:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])}},function(e){e.O(0,[847,718,971,117,744],function(){return e(e.s=6231)}),_N_E=e.O()}]);